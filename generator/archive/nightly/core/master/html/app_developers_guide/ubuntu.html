

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using Ubuntu for a Single Sawtooth Node &mdash; Sawtooth latest documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Creating a Sawtooth Test Network" href="creating_sawtooth_network.html" />
    <link rel="prev" title="Using Kubernetes for a Single Sawtooth Node" href="kubernetes.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../contents.html" class="icon icon-home" alt="Documentation Home"> Sawtooth
          

          
          </a>

          
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../app_developers_guide.html">Application Developer’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">Transaction Family Overview</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="installing_sawtooth.html">Setting Up a Sawtooth Node for Testing</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="docker.html">Using Docker for a Single Sawtooth Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="kubernetes.html">Using Kubernetes for a Single Sawtooth Node</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Using Ubuntu for a Single Sawtooth Node</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#about-the-ubuntu-test-node-environment">About the Ubuntu Test Node Environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-1-install-sawtooth">Step 1: Install Sawtooth</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-2-generate-a-user-key">Step 2: Generate a User Key</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-3-generate-the-root-key-for-the-validator">Step 3: Generate the Root Key for the Validator</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-4-create-the-genesis-block">Step 4: Create the Genesis Block</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-5-start-the-validator">Step 5: Start the Validator</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-6-start-the-devmode-consensus-engine">Step 6: Start the Devmode Consensus Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-7-start-the-rest-api">Step 7: Start the REST API</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-8-start-the-transaction-processors">Step 8: Start the Transaction Processors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-9-open-a-client-terminal-window">Step 9: Open a Client Terminal Window</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-10-check-the-rest-api-process">Step 10: Check the REST API Process</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-11-confirm-connectivity-to-the-rest-api-for-ubuntu">Step 11: Confirm Connectivity to the REST API (for Ubuntu)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-12-use-sawtooth-commands-as-a-client">Step 12: Use Sawtooth Commands as a Client</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-13-examine-sawtooth-logs">Step 13: Examine Sawtooth Logs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-14-stop-sawtooth-components">Step 14: Stop Sawtooth Components</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="creating_sawtooth_network.html">Creating a Sawtooth Test Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_xo_transaction_family.html">Playing with the XO Transaction Family</a></li>
<li class="toctree-l2"><a class="reference internal" href="using_the_sdks.html">Using the Sawtooth SDKs</a></li>
<li class="toctree-l2"><a class="reference internal" href="no_sdk.html">Development Without an SDK</a></li>
<li class="toctree-l2"><a class="reference internal" href="address_and_namespace.html">Address and Namespace Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="namespace_restriction.html">Namespace Restriction</a></li>
<li class="toctree-l2"><a class="reference internal" href="event_subscriptions.html">Subscribing to Events</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">Architecture Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../transaction_family_specifications.html">Transaction Family Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sysadmin_guide.html">System Administrator’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_references.html">SDK and API References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">CLI Command Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../contents.html">Sawtooth</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../contents.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../app_developers_guide.html">Application Developer’s Guide</a> &raquo;</li>
        
          <li><a href="installing_sawtooth.html">Setting Up a Sawtooth Node for Testing</a> &raquo;</li>
        
      <li>Using Ubuntu for a Single Sawtooth Node</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/app_developers_guide/ubuntu.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-ubuntu-for-a-single-sawtooth-node">
<h1>Using Ubuntu for a Single Sawtooth Node<a class="headerlink" href="#using-ubuntu-for-a-single-sawtooth-node" title="Permalink to this headline">¶</a></h1>
<p>This procedure explains how to set up Hyperledger Sawtooth for application
development on Ubuntu 18.04 (Bionic). It shows you how to install Sawtooth on
Ubuntu, then walks you through the following tasks:</p>
<blockquote>
<div><ul class="simple">
<li><p>Generating a user key</p></li>
<li><p>Generating a root key</p></li>
<li><p>Creating the genesis block</p></li>
<li><p>Starting the components: validator, consensus engine, REST API, and
transaction processors</p></li>
<li><p>Checking the status of the REST API</p></li>
<li><p>Using Sawtooth commands to submit transactions, display block data, and view
global state</p></li>
<li><p>Examining Sawtooth logs</p></li>
<li><p>Stopping Sawtooth and resetting the development environment</p></li>
</ul>
</div></blockquote>
<p>After completing this procedure, you will have the application development
environment that is required for the other tutorials in this guide. The next
tutorial introduces the XO transaction family by using the <code class="docutils literal notranslate"><span class="pre">xo</span></code> client
commands to play a game of tic-tac-toe. The final set of tutorials describe how
to use an SDK to create a transaction family that implements your application’s
business logic.</p>
<div class="section" id="about-the-ubuntu-test-node-environment">
<h2>About the Ubuntu Test Node Environment<a class="headerlink" href="#about-the-ubuntu-test-node-environment" title="Permalink to this headline">¶</a></h2>
<p>This Ubuntu environment is a single Sawtooth node that is running a
validator, a REST API, the Devmode consensus engine, and three transaction
processors. The environment uses
<a class="reference internal" href="../introduction.html#dynamic-consensus-label"><span class="std std-ref">Devmode consensus</span></a> and
<a class="reference internal" href="../architecture/scheduling.html"><span class="doc">parallel transaction processing</span></a>.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/appdev-environment-one-node-3TPs.svg"><img alt="Ubuntu: Sawtooth application environment with one node" src="../_images/appdev-environment-one-node-3TPs.svg" width="100%" /></a>
</div>
<p>This environment introduces basic Sawtooth functionality with the
<a class="reference external" href="../transaction_family_specifications/integerkey_transaction_family">IntegerKey</a>
and
<a class="reference external" href="../transaction_family_specifications/settings_transaction_family">Settings</a>
transaction processors for the business logic and Sawtooth commands as a client.
It also includes the
<a class="reference external" href="../transaction_family_specifications/xo_transaction_family">XO</a>
transaction processor, which is used in later tutorials.</p>
<p>The IntegerKey and XO families are simple examples of a transaction family, but
Settings is a reference implementation. In a production environment, you should
always run a transaction processor that supports the Settings transaction
family.</p>
<p>In this procedure, you will open seven terminal windows on your host system: one
for each Sawtooth component and one to use for client commands.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This procedure starts the validator first, then the REST API, followed by
the transaction processors. However, the start-up order is flexible. For
example, you can start the transaction processors before starting the
validator.</p>
</div>
</div>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>This Sawtooth development environment requires Ubuntu 18.04 (Bionic).</p>
</div>
<div class="section" id="step-1-install-sawtooth">
<h2>Step 1: Install Sawtooth<a class="headerlink" href="#step-1-install-sawtooth" title="Permalink to this headline">¶</a></h2>
<p>The Sawtooth package repositories provide two types of Ubuntu packages:
stable or nightly.  We recommend using the stable repository.</p>
<ol class="arabic">
<li><p>Open a terminal window on your host system.
From this point on, this procedure refers to this window as the “validator
terminal window”.
In the following examples, the prompt <code class="docutils literal notranslate"><span class="pre">user&#64;validator$</span></code>
shows the commands that must run in this window.</p></li>
<li><p>Choose either the stable repository or the nightly repository.</p>
<ul>
<li><p>To add the stable repository, run these commands:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@validator$</span> sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 8AA7AF1F1091A5FD
<span class="gp">user@validator$</span> sudo add-apt-repository <span class="s1">&#39;deb [arch=amd64] http://repo.sawtooth.me/ubuntu/chime/stable bionic universe&#39;</span>
<span class="gp">user@validator$</span> sudo apt-get update
</pre></div>
</div>
</li>
<li><p>To use the nightly repository, run the following commands:</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Nightly builds have not gone through long-running network testing and
could be out of sync with the documentation.  We really do recommend the
stable repository.</p>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@validator$</span> sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 44FC67F19B2466EA
<span class="gp">user@validator$</span> sudo apt-add-repository <span class="s2">&quot;deb http://repo.sawtooth.me/ubuntu/nightly bionic universe&quot;</span>
<span class="gp">user@validator$</span> sudo apt-get update
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Install the Sawtooth packages. Sawtooth consists of several Ubuntu packages
that can be installed together using the <code class="docutils literal notranslate"><span class="pre">sawtooth</span></code> meta-package. Run the
following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@validator$</span> sudo apt-get install -y sawtooth
</pre></div>
</div>
</li>
<li><p>Install the Sawtooth Devmode consensus engine package. Run the following
command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@validator$</span> sudo apt-get install sawtooth-devmode-engine-rust
</pre></div>
</div>
</li>
<li><p>Any time after installation, you can view the installed Sawtooth packages
with the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@validator$</span> dpkg -l <span class="s1">&#39;*sawtooth*&#39;</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="step-2-generate-a-user-key">
<span id="generate-user-key-ubuntu"></span><h2>Step 2: Generate a User Key<a class="headerlink" href="#step-2-generate-a-user-key" title="Permalink to this headline">¶</a></h2>
<p>Generate your user key for Sawtooth, using the same terminal window as the
previous step.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@validator$</span> sawtooth keygen my_key
<span class="go">writing file: /home/yourname/.sawtooth/keys/my_key.priv</span>
<span class="go">writing file: /home/yourname/.sawtooth/keys/my_key.pub</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This command specifies <code class="docutils literal notranslate"><span class="pre">my_key</span></code> as the base name for the key files, to be
consistent with the key name that is used in the example Docker and
Kubernetes files. By default (when no key name is specified), the
<code class="docutils literal notranslate"><span class="pre">sawtooth</span> <span class="pre">keygen</span></code> command uses your user name.</p>
</div>
</div>
<div class="section" id="step-3-generate-the-root-key-for-the-validator">
<span id="generate-root-key-ubuntu"></span><h2>Step 3: Generate the Root Key for the Validator<a class="headerlink" href="#step-3-generate-the-root-key-for-the-validator" title="Permalink to this headline">¶</a></h2>
<p>Generate the key for the validator, which runs as root. Use the same terminal
window as the previous step.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@validator$</span> sudo sawadm keygen
<span class="go">writing file: /etc/sawtooth/keys/validator.priv</span>
<span class="go">writing file: /etc/sawtooth/keys/validator.pub</span>
</pre></div>
</div>
</div>
<div class="section" id="step-4-create-the-genesis-block">
<span id="create-genesis-block-ubuntu-label"></span><h2>Step 4: Create the Genesis Block<a class="headerlink" href="#step-4-create-the-genesis-block" title="Permalink to this headline">¶</a></h2>
<p>Because this is a new network, you must create a genesis block (the first block
on the distributed ledger). This step is done only for the first node
on the network. Nodes that join an existing network do not create
a genesis block.</p>
<p>The genesis block contains initial values that are necessary when a Sawtooth
distributed ledger is created and used for the first time, including the keys
for users who are authorized to set and change configuration settings.</p>
<p>Use the same terminal window as the previous step.</p>
<ol class="arabic">
<li><p>Change to a writable directory such as <code class="docutils literal notranslate"><span class="pre">/tmp</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@validator$</span> <span class="nb">cd</span> /tmp
</pre></div>
</div>
</li>
<li><p>Create a batch with a settings proposal for the genesis
block.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@validator$</span> sawset genesis --key <span class="nv">$HOME</span>/.sawtooth/keys/my_key.priv
<span class="go">Generated config-genesis.batch</span>
</pre></div>
</div>
<p>This command authorizes you to set and change Sawtooth settings. The
settings changes will take effect after the validator and Settings
transaction processor have started.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>You must use the same key for the <code class="docutils literal notranslate"><span class="pre">sawset</span> <span class="pre">proposal</span> <span class="pre">create</span></code> command in
the next step.</p>
</div>
</li>
<li><p>Create another settings proposal to initialize the Devmode consensus engine
settings. This command sets the consensus algorithm to Devmode.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@validator$</span> sawset proposal create <span class="se">\</span>
--key <span class="nv">$HOME</span>/.sawtooth/keys/my_key.priv <span class="se">\</span>
sawtooth.consensus.algorithm.name<span class="o">=</span>Devmode <span class="se">\</span>
sawtooth.consensus.algorithm.version<span class="o">=</span><span class="m">0</span>.1 -o config.batch
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">sawtooth.consensus.algorithm.name</span></code> and
<code class="docutils literal notranslate"><span class="pre">sawtooth.consensus.algorithm.version</span></code> settings are required; <code class="docutils literal notranslate"><span class="pre">sawadm</span>
<span class="pre">genesis</span></code> will fail if they are not present in one of the batches, unless
the <code class="docutils literal notranslate"><span class="pre">--ignore-required-settings</span></code> flag is used.</p>
</div>
</li>
<li><p>As the sawtooth user, combine the previously created batches into a single
genesis batch that will be committed in the genesis block.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@validator$</span> sudo -u sawtooth sawadm genesis config-genesis.batch config.batch
<span class="go">Processing config-genesis.batch...</span>
<span class="go">Processing config.batch...</span>
<span class="go">Generating /var/lib/sawtooth/genesis.batch</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">-u</span> <span class="pre">sawtooth</span></code> option refers to the sawtooth user,
not the <code class="docutils literal notranslate"><span class="pre">sawtooth</span></code> command.</p>
</div>
</li>
</ol>
</div>
<div class="section" id="step-5-start-the-validator">
<span id="start-validator-ubuntu-label"></span><h2>Step 5: Start the Validator<a class="headerlink" href="#step-5-start-the-validator" title="Permalink to this headline">¶</a></h2>
<p>Use the same terminal window as the previous step.</p>
<ol class="arabic">
<li><p>As the sawtooth user, start a validator that listens locally on the default
ports.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@validator$</span> sudo -u sawtooth sawtooth-validator -vv
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See <a class="reference internal" href="../cli/sawtooth-validator.html"><span class="doc">sawtooth-validator</span></a> in the CLI Command Reference for
information on the <code class="docutils literal notranslate"><span class="pre">sawtooth-validator</span></code> options.</p>
</div>
<p>The validator terminal window displays verbose log messages. The output will
be similar to this truncated example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[2018-03-14 15:53:34.909 INFO     cli] sawtooth-validator (Hyperledger Sawtooth) version 1.0.1</span>
<span class="go">[2018-03-14 15:53:34.909 INFO     path] Skipping path loading from non-existent config file: /etc/sawtooth/path.toml</span>
<span class="go">[2018-03-14 15:53:34.910 INFO     validator] Skipping validator config loading from non-existent config file: /etc/sawtooth/validator.toml</span>
<span class="go">[2018-03-14 15:53:34.911 INFO     keys] Loading signing key: /home/username/.sawtooth/keys/my_key.priv</span>
<span class="go">[2018-03-14 15:53:34.912 INFO     cli] config [path]: config_dir = &quot;/etc/sawtooth&quot;; config [path]: key_dir = &quot;/etc/sawtooth/keys&quot;; config [path]: data_dir = &quot;/var/lib/sawtooth&quot;; config [path]: log_dir = &quot;/var/log/sawtooth&quot;; config [path]: policy_dir = &quot;/etc/sawtooth/policy&quot;</span>
<span class="go">[2018-03-14 15:53:34.913 WARNING  cli] Network key pair is not configured, Network communications between validators will not be authenticated or encrypted.</span>
<span class="go">[2018-03-14 15:53:34.914 DEBUG    core] global state database file is /var/lib/sawtooth/merkle-00.lmdb</span>
<span class="go">...</span>
<span class="go">[2018-03-14 15:53:34.929 DEBUG    genesis] genesis_batch_file: /var/lib/sawtooth/genesis.batch</span>
<span class="go">[2018-03-14 15:53:34.930 DEBUG    genesis] block_chain_id: not yet specified</span>
<span class="go">[2018-03-14 15:53:34.931 INFO     genesis] Producing genesis block from /var/lib/sawtooth/genesis.batch</span>
<span class="go">[2018-03-14 15:53:34.932 DEBUG    genesis] Adding 1 batches</span>
<span class="go">[2018-03-14 15:53:34.934 DEBUG    executor] no transaction processors registered for processor type sawtooth_settings: 1.0</span>
<span class="go">[2018-03-14 15:53:34.936 INFO     executor] Waiting for transaction processor (sawtooth_settings, 1.0)</span>
</pre></div>
</div>
<p>Note that the validator is waiting for the Settings transaction processor
(<code class="docutils literal notranslate"><span class="pre">sawtooth_settings</span></code>) to start.</p>
</li>
</ol>
<p>The validator terminal window will continue to display log messages as you
complete this procedure.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to stop the validator, enter CTRL-c in the validator terminal
window. For more information, see <a class="reference internal" href="#stop-sawtooth-ubuntu-label"><span class="std std-ref">Step 14: Stop Sawtooth Components</span></a>.</p>
</div>
</div>
<div class="section" id="step-6-start-the-devmode-consensus-engine">
<span id="start-devmode-consensus-label"></span><h2>Step 6: Start the Devmode Consensus Engine<a class="headerlink" href="#step-6-start-the-devmode-consensus-engine" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>Open a new terminal window (the consensus terminal window). In this procedure,
the prompt <code class="docutils literal notranslate"><span class="pre">user&#64;consensus$</span></code> shows the commands that should be run in this
window.</p></li>
<li><p>Run the following command to start the Devmode consensus engine that decides what block to add to a blockchain.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@consensus$</span> sudo -u sawtooth devmode-engine-rust -vv --connect tcp://localhost:5050
</pre></div>
</div>
<p>The consensus terminal window displays verbose log messages showing the
Devmode engine connecting to and registering with the validator.
The output will be similar to this example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[2019-01-09 11:45:07.807 INFO     handlers] Consensus engine registered: Devmode 0.1</span>
<span class="go">DEBUG | devmode_rust::engine | Min: 0 -- Max: 0</span>
<span class="go">INFO  | devmode_rust::engine | Wait time: 0</span>
<span class="go">DEBUG | devmode_rust::engine | Initializing block</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="step-7-start-the-rest-api">
<span id="start-rest-api-label"></span><h2>Step 7: Start the REST API<a class="headerlink" href="#step-7-start-the-rest-api" title="Permalink to this headline">¶</a></h2>
<p>The REST API allows you to configure a running validator, submit batches, and
query the state of the distributed ledger.</p>
<ol class="arabic">
<li><p>Open a new terminal window (the rest-api terminal window). In this procedure,
the prompt <code class="docutils literal notranslate"><span class="pre">user&#64;rest-api$</span></code> shows the commands that should be run in this
window.</p></li>
<li><p>Run the following command to start the REST API and connect to the local
validator.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@rest-api$</span> sudo -u sawtooth sawtooth-rest-api -v
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See <a class="reference internal" href="../cli/sawtooth-rest-api.html"><span class="doc">sawtooth-rest-api</span></a> in the CLI Command Reference for
information on the <code class="docutils literal notranslate"><span class="pre">sawtooth-rest-api</span></code> options.</p>
</div>
<p>The output is similar to this example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Connecting to tcp://localhost:4004</span>
<span class="go">[2018-03-14 15:55:29.509 INFO     rest_api] Creating handlers for validator at tcp://localhost:4004</span>
<span class="go">[2018-03-14 15:55:29.511 INFO     rest_api] Starting REST API on 127.0.0.1:8008</span>
<span class="go">======== Running on http://127.0.0.1:8008 ========</span>
<span class="gp gp-VirtualEnv">(Press CTRL+C to quit)</span>
</pre></div>
</div>
</li>
</ol>
<p>The rest-api terminal window continues display log messages as you complete this
procedure.</p>
</div>
<div class="section" id="step-8-start-the-transaction-processors">
<span id="start-tps-label"></span><h2>Step 8: Start the Transaction Processors<a class="headerlink" href="#step-8-start-the-transaction-processors" title="Permalink to this headline">¶</a></h2>
<p>In this step, you will open a new terminal window for each transaction
processor.</p>
<ol class="arabic">
<li><p>Start the Settings transaction processor, <code class="docutils literal notranslate"><span class="pre">settings-tp</span></code>.</p>
<ol class="loweralpha">
<li><p>Open a new terminal window (the settings terminal window). The prompt
<code class="docutils literal notranslate"><span class="pre">user&#64;settings-tp$</span></code> shows the commands that should be run in this
window.</p></li>
<li><p>Run the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@settings$</span> sudo -u sawtooth settings-tp -v
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See <a class="reference internal" href="../cli/settings-tp.html"><span class="doc">settings-tp</span></a> in the CLI Command Reference for
information on the <code class="docutils literal notranslate"><span class="pre">settings-tp</span></code> options.</p>
</div>
</li>
<li><p>Check the validator terminal window to confirm that the transaction
processor has registered with the validator, as shown in this example
log message:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[2018-03-14 16:00:17.223 INFO     processor_handlers] registered transaction processor: connection_id=eca3a9ad0ff1cdbc29e449cc61af4936bfcaf0e064952dd56615bc00bb9df64c4b01209d39ae062c555d3ddc5e3a9903f1a9e2d0fd2cdd47a9559ae3a78936ed, family=sawtooth_settings, version=1.0, namespaces=[&#39;000000&#39;]</span>
</pre></div>
</div>
</li>
</ol>
<p>The <code class="docutils literal notranslate"><span class="pre">settings-tp</span></code> transaction processor continues to run and to display log
messages in its terminal window.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>At this point, you can see the authorized keys setting that was proposed
in <a class="reference internal" href="#create-genesis-block-ubuntu-label"><span class="std std-ref">Step 4: Create the Genesis Block</span></a>. To see this setting, open a
new terminal window (the client terminal window) and run the following
command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@client$</span> sawtooth settings list
<span class="go">sawtooth.consensus.algorithm.name: Devmode</span>
<span class="go">sawtooth.consensus.algorithm.version: 0.1</span>
<span class="go">sawtooth.settings.vote.authorized_keys: 0276023d4f7323103db8d8683a4b7bc1eae1f66...</span>
</pre></div>
</div>
</div>
</li>
<li><p>Start the IntegerKey transaction processor, <code class="docutils literal notranslate"><span class="pre">intkey-tp-python</span></code>.</p>
<ol class="loweralpha">
<li><p>Open a new terminal window (the intkey terminal window). The prompt
<code class="docutils literal notranslate"><span class="pre">user&#64;intkey$</span></code> shows the commands that should be run in this window.</p></li>
<li><p>Run the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@intkey$</span> sudo -u sawtooth intkey-tp-python -v
<span class="go">[23:07:57 INFO    core] register attempt: OK</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For information on the <code class="docutils literal notranslate"><span class="pre">intkey-tp-python</span></code> options, run the command
<code class="docutils literal notranslate"><span class="pre">intkey-tp-python</span> <span class="pre">--help</span></code>.</p>
</div>
</li>
<li><p>Check the validator terminal window to confirm that the transaction
processor has registered with the validator.  A successful registration
event produces the following output:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[2018-03-14 15:56:35.255 INFO     processor_handlers] registered transaction processor: connection_id=94d1aedfc2ba0575a0e4b4f06be7ff7875703f18817027b463b3772ce2b963adb9902f7ed0bafa50201e6845015f65bac814302bdafbcda6e6698fe1733b9411, family=intkey, version=1.0, namespaces=[&#39;1cf126&#39;]</span>
</pre></div>
</div>
</li>
</ol>
<p>The <code class="docutils literal notranslate"><span class="pre">intkey-tp-python</span></code> transaction processor continues to run and to
display log messages in its terminal window.</p>
</li>
<li><p>(Optional) Start the XO transaction processor, <code class="docutils literal notranslate"><span class="pre">xo-tp-python</span></code>. This
transaction processor will be used in a later tutorial.</p>
<ol class="loweralpha">
<li><p>Open a new terminal window (the xo terminal window). The prompt
<code class="docutils literal notranslate"><span class="pre">user&#64;xo$</span></code> shows the commands that should be run in this window.</p></li>
<li><p>Run the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@xo$</span> sudo -u sawtooth xo-tp-python -v
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For information on the <code class="docutils literal notranslate"><span class="pre">xo-tp-python</span></code> options, run the command
<code class="docutils literal notranslate"><span class="pre">xo-tp-python</span> <span class="pre">--help</span></code>.</p>
</div>
</li>
<li><p>Check the validator terminal window to confirm that the transaction
processor has registered with the validator.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[2018-03-14 16:04:18.706 INFO     processor_handlers] registered transaction processor: connection_id=c885e99a11724e04e7da4ee426ee00d4af2cb54b67bf2fbd2f57e862bf28fa2c759a0d0978573782369659124797cc6f38d41bfde2469fe69e7e48dc1fadf5a9, family=xo, version=1.0, namespaces=[&#39;5b7349&#39;]</span>
</pre></div>
</div>
</li>
</ol>
<p>The <code class="docutils literal notranslate"><span class="pre">xo-tp-python</span></code> transaction processor continues to run and to display
log messages in its terminal window.</p>
</li>
</ol>
</div>
<div class="section" id="step-9-open-a-client-terminal-window">
<span id="open-client-window-ubuntu-label"></span><h2>Step 9: Open a Client Terminal Window<a class="headerlink" href="#step-9-open-a-client-terminal-window" title="Permalink to this headline">¶</a></h2>
<p>Open a new terminal window to use as the client terminal window.</p>
<p>In the following steps, the prompt <code class="docutils literal notranslate"><span class="pre">user&#64;client$</span></code> shows the commands that
should be run in this window.</p>
</div>
<div class="section" id="step-10-check-the-rest-api-process">
<h2>Step 10: Check the REST API Process<a class="headerlink" href="#step-10-check-the-rest-api-process" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>Run the following command in the client terminal window:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@client$</span> ps aux <span class="p">|</span> grep <span class="o">[</span>s<span class="o">]</span>awtooth-rest-api
<span class="go">sawtooth  2829  0.0  0.3  55756  3980 pts/0    S+   19:36   0:00 sudo -u sawtooth sawtooth-rest-api -v</span>
<span class="go">sawtooth  2830  0.0  3.6 221164 37520 pts/0    Sl+  19:36   0:00 /usr/bin/python3 /usr/bin/sawtooth-rest-api -v</span>
</pre></div>
</div>
</li>
<li><p>If necessary, restart the REST API (see <a class="reference internal" href="#start-rest-api-label"><span class="std std-ref">Step 7: Start the REST API</span></a>).</p></li>
</ol>
</div>
<div class="section" id="step-11-confirm-connectivity-to-the-rest-api-for-ubuntu">
<span id="confirming-rest-api-ubuntu-label"></span><h2>Step 11: Confirm Connectivity to the REST API (for Ubuntu)<a class="headerlink" href="#step-11-confirm-connectivity-to-the-rest-api-for-ubuntu" title="Permalink to this headline">¶</a></h2>
<p>If the <code class="docutils literal notranslate"><span class="pre">curl</span></code> command is installed on your host system, you can use this
step to verify that you can connect to the REST API.</p>
<ol class="arabic">
<li><p>Open a new terminal window on your host system and run this <code class="docutils literal notranslate"><span class="pre">curl</span></code> command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@host$</span> curl http://localhost:8008/blocks
</pre></div>
</div>
<p>If the validator and REST API are running and reachable, the output for each
command should be similar to this example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">{</span>
<span class="go">  &quot;data&quot;: [</span>
<span class="go">    {</span>
<span class="go">      &quot;batches&quot;: [],</span>
<span class="go">      &quot;header&quot;: {</span>
<span class="go">        &quot;batch_ids&quot;: [],</span>
<span class="go">        &quot;block_num&quot;: 0,</span>
<span class="go">        &quot;mconsensus&quot;: &quot;R2VuZXNpcw==&quot;,</span>
<span class="go">        &quot;previous_block_id&quot;: &quot;0000000000000000&quot;,</span>
<span class="go">        &quot;signer_public_key&quot;: &quot;03061436bef428626d11c17782f9e9bd8bea55ce767eb7349f633d4bfea4dd4ae9&quot;,</span>
<span class="go">        &quot;state_root_hash&quot;: &quot;708ca7fbb701799bb387f2e50deaca402e8502abe229f705693d2d4f350e1ad6&quot;</span>
<span class="go">      },</span>
<span class="go">      &quot;header_signature&quot;: &quot;119f076815af8b2c024b59998e2fab29b6ae6edf3e28b19de91302bd13662e6e43784263626b72b1c1ac120a491142ca25393d55ac7b9f3c3bf15d1fdeefeb3b&quot;</span>
<span class="go">    }</span>
<span class="go">  ],</span>
<span class="go">  &quot;head&quot;: &quot;119f076815af8b2c024b59998e2fab29b6ae6edf3e28b19de91302bd13662e6e43784263626b72b1c1ac120a491142ca25393d55ac7b9f3c3bf15d1fdeefeb3b&quot;,</span>
<span class="go">  &quot;link&quot;: &quot;http://localhost:8008/blocks?head=119f076815af8b2c024b59998e2fab29b6ae6edf3e28b19de91302bd13662e6e43784263626b72b1c1ac120a491142ca25393d55ac7b9f3c3bf15d1fdeefeb3b&quot;,</span>
<span class="go">  &quot;paging&quot;: {</span>
<span class="go">    &quot;start_index&quot;: 0,</span>
<span class="go">    &quot;total_count&quot;: 1</span>
<span class="go">  }</span>
<span class="go">}</span>
</pre></div>
</div>
<p>If the validator process or the validator container is not running, the
<code class="docutils literal notranslate"><span class="pre">curl</span></code> command will time out or return nothing.</p>
</li>
</ol>
</div>
<div class="section" id="step-12-use-sawtooth-commands-as-a-client">
<h2>Step 12: Use Sawtooth Commands as a Client<a class="headerlink" href="#step-12-use-sawtooth-commands-as-a-client" title="Permalink to this headline">¶</a></h2>
<p>Sawtooth includes commands that act as a client application. This step describes
how to use the <code class="docutils literal notranslate"><span class="pre">intkey</span></code> and <code class="docutils literal notranslate"><span class="pre">sawtooth</span></code> commands to create and submit
transactions, display blockchain and block data, and examine global state data.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Use the <code class="docutils literal notranslate"><span class="pre">--help</span></code> option with any Sawtooth command to display the available
options and subcommands.</p>
</div>
<p>Continue to use the client terminal window to run the commands in this step.</p>
<div class="section" id="creating-and-submitting-transactions-with-intkey">
<h3>Creating and Submitting Transactions with intkey<a class="headerlink" href="#creating-and-submitting-transactions-with-intkey" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">intkey</span></code> command creates sample IntegerKey transactions for testing
purposes.</p>
<ol class="arabic">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">intkey</span> <span class="pre">create_batch</span></code> to prepare batches of transactions that set
a few keys to random values, then randomly increment and decrement those
values. These batches are saved locally in the file <code class="docutils literal notranslate"><span class="pre">batches.intkey</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@client$</span> intkey create_batch --count <span class="m">10</span> --key-count <span class="m">5</span>
<span class="go">Writing to batches.intkey...</span>
</pre></div>
</div>
</li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">intkey</span> <span class="pre">load</span></code> to submit the batches to the validator.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@client$</span> intkey load -f batches.intkey
<span class="go">batches: 11 batch/sec: 141.7800162868952</span>
</pre></div>
</div>
</li>
<li><p>The validator terminal window displays many log messages showing that the
validator is handling the submitted transactions and processing blocks, as in
this truncated example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">...</span>
<span class="go">78c295614594319ece3fac71145c05ca36fadc3bd6e65 (block_num:13, state:addbd88bc80ecb05793750b7c80b91588043a1287cd8d4b6e0b1e6a68a0e4017, previous_block_id:f4323dfc238938db834aa5d40b4e6c2825bf7eae5cdaf73a9da28cb308a765707e85ac06e72b01e3d7d529132329b55b18d0cc71ab026506edd63bc6b718e80a)^[[0m</span>
<span class="go">[2018-03-14 16:24:49.621 INFO     chain] Starting block validation of : 60c0c348a00cde622a3664d6d4fb949736b78f8bcb6b77bd0300cdc7675ca9d4116ee23ec18c7cfee5978c295614594319ece3fac71145c05ca36fadc3bd6e65 (block_num:13, state:addbd88bc80ecb05793750b7c80b91588043a1287cd8d4b6e0b1e6a68a0e4017, previous_block_id:f4323dfc238938db834aa5d40b4e6c2825bf7eae5cdaf73a9da28cb308a765707e85ac06e72b01e3d7d529132329b55b18d0cc71ab026506edd63bc6b718e80a)</span>
<span class="go">[2018-03-14 16:24:49.646 INFO     chain] Comparing current chain head &#39;f4323dfc238938db834aa5d40b4e6c2825bf7eae5cdaf73a9da28cb308a765707e85ac06e72b01e3d7d529132329b55b18d0cc71ab026506edd63bc6b718e80a (block_num:12, state:c30ed78dde19d9ff58587a8bdd4aa435e09212cd1fee3e95d88faafe44f207cc, previous_block_id:dc98ce9029e6e3527bca18060cbb1325b545054b1589f2df7bf200fb0a09d0572491a3837dea1baf2981f5a960bd108f198806c974efcb3b69d2712809cc6065)&#39; against new block &#39;60c0c348a00cde622a3664d6d4fb949736b78f8bcb6b77bd0300cdc7675ca9d4116ee23ec18c7cfee5978c295614594319ece3fac71145c05ca36fadc3bd6e65 (block_num:13, state:addbd88bc80ecb05793750b7c80b91588043a1287cd8d4b6e0b1e6a68a0e4017, previous_block_id:f4323dfc238938db834aa5d40b4e6c2825bf7eae5cdaf73a9da28cb308a765707e85ac06e72b01e3d7d529132329b55b18d0cc71ab026506edd63bc6b718e80a)&#39;</span>
<span class="go">[2018-03-14 16:24:49.647 INFO     chain] Fork comparison at height 13 is between - and 60c0c348</span>
<span class="go">[2018-03-14 16:24:49.647 INFO     chain] Chain head updated to: 60c0c348a00cde622a3664d6d4fb949736b78f8bcb6b77bd0300cdc7675ca9d4116ee23ec18c7cfee5978c295614594319ece3fac71145c05ca36fadc3bd6e65 (block_num:13, state:addbd88bc80ecb05793750b7c80b91588043a1287cd8d4b6e0b1e6a68a0e4017, previous_block_id:f4323dfc238938db834aa5d40b4e6c2825bf7eae5cdaf73a9da28cb308a765707e85ac06e72b01e3d7d529132329b55b18d0cc71ab026506edd63bc6b718e80a)</span>
<span class="go">[2018-03-14 16:24:49.648 INFO     publisher] Now building on top of block: 60c0c348a00cde622a3664d6d4fb949736b78f8bcb6b77bd0300cdc7675ca9d4116ee23ec18c7cfee5978c295614594319ece3fac71145c05ca36fadc3bd6e65 (block_num:13, state:addbd88bc80ecb05793750b7c80b91588043a1287cd8d4b6e0b1e6a68a0e4017, previous_block_id:f4323dfc238938db834aa5d40b4e6c2825bf7eae5cdaf73a9da28cb308a765707e85ac06e72b01e3d7d529132329b55b18d0cc71ab026506edd63bc6b718e80a)</span>
<span class="go">[2018-03-14 16:24:49.649 DEBUG    chain] Verify descendant blocks: 60c0c348a00cde622a3664d6d4fb949736b78f8bcb6b77bd0300cdc7675ca9d4116ee23ec18c7cfee5978c295614594319ece3fac71145c05ca36fadc3bd6e65 (block_num:13, state:addbd88bc80ecb05793750b7c80b91588043a1287cd8d4b6e0b1e6a68a0e4017, previous_block_id:f4323dfc238938db834aa5d40b4e6c2825bf7eae5cdaf73a9da28cb308a765707e85ac06e72b01e3d7d529132329b55b18d0cc71ab026506edd63bc6b718e80a) ([])</span>
<span class="go">[2018-03-14 16:24:49.651 INFO     chain] Finished block validation of: 60c0c348a00cde622a3664d6d4fb949736b78f8bcb6b77bd0300cdc7675ca9d4116ee23ec18c7cfee5978c295614594319ece3fac71145c05ca36fadc3bd6e65 (block_num:13, state:addbd88bc80ecb05793750b7c80b91588043a1287cd8d4b6e0b1e6a68a0e4017, previous_block_id:f4323dfc238938db834aa5d40b4e6c2825bf7eae5cdaf73a9da28cb308a765707e85ac06e72b01e3d7d529132329b55b18d0cc71ab026506edd63bc6b718e80a)</span>
</pre></div>
</div>
</li>
<li><p>The rest-api terminal window displays a log message as it communicates with
the intkey transaction processor.</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[2018-03-14 16:24:49.587 INFO     helpers] POST /batches HTTP/1.1: 202 status, 1639 size, in 0.030922 s</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>You can also look at the Sawtooth log files to see what happened. Use the
following command to display the last 10 entries in the intkey log file,
which show that values have been changed.</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@client$</span> sudo bash -c <span class="s2">&quot;tail -10 /var/log/sawtooth/intkey-*-debug.log&quot;</span>
<span class="go">[2018-03-14 16:24:49.587 [MainThread] core DEBUG] received message of type: TP_PROCESS_REQUEST</span>
<span class="go">[2018-03-14 16:24:49.588 [MainThread] handler DEBUG] incrementing &quot;MvRznE&quot; by 1</span>
<span class="go">[2018-03-14 16:24:49.624 [MainThread] core DEBUG] received message of type: TP_PROCESS_REQUEST</span>
<span class="go">[2018-03-14 16:24:49.625 [MainThread] handler DEBUG] incrementing &quot;iJWCRq&quot; by 5</span>
<span class="go">[2018-03-14 16:24:49.629 [MainThread] core DEBUG] received message of type: TP_PROCESS_REQUEST</span>
<span class="go">[2018-03-14 16:24:49.630 [MainThread] handler DEBUG] incrementing &quot;vJJL1N&quot; by 8</span>
<span class="go">[2018-03-14 16:24:49.634 [MainThread] core DEBUG] received message of type: TP_PROCESS_REQUEST</span>
<span class="go">[2018-03-14 16:24:49.636 [MainThread] handler DEBUG] incrementing &quot;vsTbBo&quot; by 4</span>
<span class="go">[2018-03-14 16:24:49.639 [MainThread] core DEBUG] received message of type: TP_PROCESS_REQUEST</span>
<span class="go">[2018-03-14 16:24:49.641 [MainThread] handler DEBUG] incrementing &quot;MvRznE&quot; by 1</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The log file names for the transaction processors contain a random
string that is unique for each instance of the transaction processor.
For more information, see <a class="reference internal" href="#examine-logs-ubuntu-label"><span class="std std-ref">Step 13: Examine Sawtooth Logs</span></a>.</p>
</div>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="submitting-transactions-with-sawtooth-batch-submit">
<h3>Submitting Transactions with sawtooth batch submit<a class="headerlink" href="#submitting-transactions-with-sawtooth-batch-submit" title="Permalink to this headline">¶</a></h3>
<p>In the example above, the <code class="docutils literal notranslate"><span class="pre">intkey</span> <span class="pre">create_batch</span></code> command created the file
<code class="docutils literal notranslate"><span class="pre">batches.intkey</span></code>.  Rather than using <code class="docutils literal notranslate"><span class="pre">intkey</span> <span class="pre">load</span></code> to submit these
transactions, you could use <code class="docutils literal notranslate"><span class="pre">sawtooth</span> <span class="pre">batch</span> <span class="pre">submit</span></code> to submit them.</p>
<ol class="arabic">
<li><p>As before, create a batch of transactions.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@client$</span> intkey create_batch --count <span class="m">10</span> --key-count <span class="m">5</span>
<span class="go">Writing to batches.intkey...</span>
</pre></div>
</div>
</li>
<li><p>Submit the batch file with the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@client$</span> sawtooth batch submit -f batches.intkey
<span class="go">batches: 11,  batch/sec: 216.80369536716367</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="viewing-blockchain-and-block-data-with-sawtooth-block">
<h3>Viewing Blockchain and Block Data with sawtooth block<a class="headerlink" href="#viewing-blockchain-and-block-data-with-sawtooth-block" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">sawtooth</span> <span class="pre">block</span></code> command displays information about the blocks stored on
the blockchain.</p>
<ol class="arabic">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">sawtooth</span> <span class="pre">block</span> <span class="pre">list</span></code> to display the list of blocks stored in state.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@client$</span> sawtooth block list
</pre></div>
</div>
<p>The output includes the block ID, as in this example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">NUM  BLOCK_ID                                                                                                                          BATS  TXNS  SIGNER</span>
<span class="go">61   9566426220751691b7463e3c1ec1d8c4f158c98e89722672721d457182cb3b3d48e734ddceabf706b41fc3e1f8d739451f7d70bd5a8708bc4085b6fb33b40bef  1     4     020d21...</span>
<span class="go">60   309c0707b95609d4ebc2fad0afd590ec40db41680a3edbbeb0875720ed59f4d775e1160a2c6cbe2e9ccb34c4671f4cd7db1e5ed35a2ed9a0f2a2c99aa981f83c  1     5     020d21...</span>
<span class="go">59   e0c6c29a9f3d1436e4837c96587ae3fa60274991efa9d0c9000d53694cd2a0841914b2f362aa05c2385126288f060f524bac3a05850edb1ac1c86f0c237afdba  1     3     020d21...</span>
<span class="go">58   8c67a1ec68bfdd5b07bb02919019b917ed26dbc6ec0fc3de15d539538bd30f8a1aa58795578970d2e607cd63cf1f5ef921476cbc0564cbe37469e5e50b72ecf2  1     3     020d21...</span>
<span class="go">57   879c6cb43e244fb7c1676cf5d9e51ace25ad8e670f37e81b81e5d9e133aebba80282913677821c14fe2ccb2aae631229bdd044222e6a8927f4f5dabb6d62c409  1     4     020d21...</span>
<span class="go">...</span>
<span class="go">5    dce0921531472a8f9840e256c585917dfc22b78c5045a3416ed76faf57232b065b8be5a34023e8a8cdab74ab24cf029a5c1051f742b9b5280b8edab5a80d805d  2     4     020d21...</span>
<span class="go">4    0007380e98fc6d63de1d47261b83186bce9722023f2e6ab6849916766e9be29f4903d76a642dfc27579b8a8bf9adba5f077c1f1457b2cad8f52a28d7079333a6  1     8     020d21...</span>
<span class="go">3    515c827b9e84c22c24838130d4e0f6af07ab271c138a61c555a830c4118a75815f54340ef3f04de009c94c3531f3202690708cf16fcfee04303972cb91e3b87a  1     10    020d21...</span>
<span class="go">2    9067bcb093bb095ca436d8868914ecf2630215d36bfd78b0b167554c544b9842193dd309f135e6959a664fe34b06b4f16a297528249550821cda9273291ebe70  1     5     020d21...</span>
<span class="go">1    3ab950b2cd370f26e188d95ee97268965732768080ca1adb71759e3c1f22d1ea19945b48fc81f5f821387fde355349f87096da00a4e356408b630ab80576d3ae  1     5     020d21...</span>
<span class="go">0    51a704e1a83086372a3c0823533881ffac9479995289902a311fd5d99ff6a32216cd1fb9883a421449c943cad8604ce1447b0f6080c8892e334b14dc082f91d3  1     1     020d21...</span>
</pre></div>
</div>
</li>
<li><p>From the output generated by <code class="docutils literal notranslate"><span class="pre">sawtooth</span> <span class="pre">block</span> <span class="pre">list</span></code>, copy the ID of a block
you want to view, then paste it in place of <code class="docutils literal notranslate"><span class="pre">{BLOCK_ID}</span></code> in the following
command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@client$</span> sawtooth block show <span class="o">{</span>BLOCK_ID<span class="o">}</span>
</pre></div>
</div>
<p>The output of this command can be quite long, because it includes all data
stored under that block. This is a truncated example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">batches:</span>
<span class="go">- header:</span>
<span class="go">    signer_public_key: 0276023d4f7323103db8d8683a4b7bc1eae1f66fbbf79c20a51185f589e2d304ce</span>
<span class="go">    transaction_ids:</span>
<span class="go">    - 24b168aaf5ea4a76a6c316924a1c26df0878908682ea5740dd70814e7c400d56354dee788191be8e28393c70398906fb467fac8db6279e90e4e61619589d42bf</span>
<span class="go">  header_signature: a93731646a8fd2bce03b3a17bc2cb3192d8597da93ce735950dccbf0e3cf0b005468fadb94732e013be0bc2afb320be159b452cf835b35870db5fa953220fb35</span>
<span class="go">  transactions:</span>
<span class="go">  - header:</span>
<span class="go">      batcher_public_key: 0276023d4f7323103db8d8683a4b7bc1eae1f66fbbf79c20a51185f589e2d304ce</span>
<span class="go">      dependencies: []</span>
<span class="go">      family_name: sawtooth_settings</span>
<span class="go">      family_version: &#39;1.0&#39;</span>
<span class="go">...</span>
<span class="go">header:</span>
<span class="go">  batch_ids:</span>
<span class="go">  - a93731646a8fd2bce03b3a17bc2cb3192d8597da93ce735950dccbf0e3cf0b005468fadb94732e013be0bc2afb320be159b452cf835b35870db5fa953220fb35</span>
<span class="go">  block_num: 3</span>
<span class="go">  consensus: RGV2bW9kZQ==</span>
<span class="go">  previous_block_id: 042f08e1ff49bbf16914a53dc9056fb6e522ca0e2cff872547eac9555c1de2a6200e67fb9daae6dfb90f02bef6a9088e94e5bdece04f622bce67ccecd678d56e</span>
<span class="go">  signer_public_key: 033fbed13b51eafaca8d1a27abc0d4daf14aab8c0cbc1bb4735c01ff80d6581c52</span>
<span class="go">  state_root_hash: 5d5ea37cbbf8fe793b6ea4c1ba6738f5eee8fc4c73cdca797736f5afeb41fbef</span>
<span class="go">header_signature: ff4f6705bf57e2a1498dc1b649cc9b6a4da2cc8367f1b70c02bc6e7f648a28b53b5f6ad7c2aa639673d873959f5d3fcc11129858ecfcb4d22c79b6845f96c5e3</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="viewing-state-data-with-sawtooth-state">
<h3>Viewing State Data with sawtooth state<a class="headerlink" href="#viewing-state-data-with-sawtooth-state" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">sawtooth</span> <span class="pre">state</span></code> command lets you display state data. Sawtooth stores
state data in a <a class="reference internal" href="../glossary.html#term-Merkle-Radix-tree"><span class="xref std std-term">Merkle-Radix tree</span></a>; for more information, see
<a class="reference internal" href="../architecture/global_state.html"><span class="doc">Global State</span></a>.</p>
<ol class="arabic">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">sawtooth</span> <span class="pre">state</span> <span class="pre">list</span></code> to list the nodes (addresses) in state.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@client$</span> sawtooth state list
</pre></div>
</div>
<p>The output will be similar to this truncated example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ADDRESS                                                                                                                                SIZE DATA</span>
<span class="go">1cf126ddb507c936e4ee2ed07aa253c2f4e7487af3a0425f0dc7321f94be02950a081ab7058bf046c788dbaf0f10a980763e023cde0ee282585b9855e6e5f3715bf1fe 11   b&#39;\xa1fcCTdcH\x...</span>
<span class="go">1cf1260cd1c2492b6e700d5ef65f136051251502e5d4579827dc303f7ed76ddb7185a19be0c6443503594c3734141d2bdcf5748a2d8c75541a8e568bae063983ea27b9 11   b&#39;\xa1frdLONu\x...</span>
<span class="go">1cf126ed7d0ac4f755be5dd040e2dfcd71c616e697943f542682a2feb14d5f146538c643b19bcfc8c4554c9012e56209f94efe580b6a94fb326be9bf5bc9e177d6af52 11   b&#39;\xa1fAUZZqk\x...</span>
<span class="go">1cf126c46ff13fcd55713bcfcf7b66eba515a51965e9afa8b4ff3743dc6713f4c40b4254df1a2265d64d58afa14a0051d3e38999704f6e25c80bed29ef9b80aee15c65 11   b&#39;\xa1fLvUYLk\x...</span>
<span class="go">1cf126c4b1b09ebf28775b4923e5273c4c01ba89b961e6a9984632612ec9b5af82a0f7c8fc1a44b9ae33bb88f4ed39b590d4774dc43c04c9a9bd89654bbee68c8166f0 13   b&#39;\xa1fXHonWY\x...</span>
<span class="go">1cf126e924a506fb2c4bb8d167d20f07d653de2447df2754de9eb61826176c7896205a17e363e457c36ccd2b7c124516a9b573d9a6142f031499b18c127df47798131a 13   b&#39;\xa1foWZXEz\x...</span>
<span class="go">1cf126c295a476acf935cd65909ed5ead2ec0168f3ee761dc6f37ea9558fc4e32b71504bf0ad56342a6671db82cb8682d64689838731da34c157fa045c236c97f1dd80 13   b&#39;\xa1fadKGve\x...</span>
</pre></div>
</div>
</li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">sawtooth</span> <span class="pre">state</span> <span class="pre">show</span></code> to view state data at a specific address (a node
in the Merkle-Radix database). Copy the address from the output of
<code class="docutils literal notranslate"><span class="pre">sawtooth</span> <span class="pre">state</span> <span class="pre">list</span></code>, then paste it in place of <code class="docutils literal notranslate"><span class="pre">{STATE_ADDRESS}</span></code> in
the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@client$</span> sawtooth state show <span class="o">{</span>STATE_ADDRESS<span class="o">}</span>
</pre></div>
</div>
<p>The output shows the bytes stored at that address and the block ID of the
“chain head” that the current state is tied to, as in this example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">DATA: &quot;b&#39;\xa1fcCTdcH\x192B&#39;&quot;</span>
<span class="go">HEAD: &quot;0c4364c6d5181282a1c7653038ec9515cb0530c6bfcb46f16e79b77cb524491676638339e8ff8e3cc57155c6d920e6a4d1f53947a31dc02908bcf68a91315ad5&quot;</span>
</pre></div>
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="step-13-examine-sawtooth-logs">
<span id="examine-logs-ubuntu-label"></span><h2>Step 13: Examine Sawtooth Logs<a class="headerlink" href="#step-13-examine-sawtooth-logs" title="Permalink to this headline">¶</a></h2>
<p>By default, Sawtooth logs are stored in the directory <code class="docutils literal notranslate"><span class="pre">/var/log/sawtooth</span></code>.
Each component (validator, REST API, and transaction processors) has both a
debug log and an error log. This example shows the log files for this
application development environment:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@client$</span> sudo ls -1 /var/log/sawtooth
<span class="go">identity-f5c42a08548c4ffa-debug.log</span>
<span class="go">identity-f5c42a08548c4ffa-error.log</span>
<span class="go">intkey-ae98c3726f9743c4-debug.log</span>
<span class="go">intkey-ae98c3726f9743c4-error.log</span>
<span class="go">rest_api-debug.log</span>
<span class="go">rest_api-error.log</span>
<span class="go">settings-6d591c44915b465c-debug.log</span>
<span class="go">settings-6d591c44915b465c-error.log</span>
<span class="go">validator-debug.log</span>
<span class="go">validator-error.log</span>
<span class="go">xo-9b8b55265ca0d546-error.log</span>
<span class="go">xo-9b8b55265ca0d546-debug.log</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the transaction processors, the log file names contain a random string to
make the names unique. This string changes for each instance of a transaction
processor. The file names on your system will be different than these
examples.</p>
</div>
<p>For more information on log files, see
<a class="reference internal" href="../sysadmin_guide/log_configuration.html"><span class="doc">Log Configuration File</span></a>.</p>
</div>
<div class="section" id="step-14-stop-sawtooth-components">
<span id="stop-sawtooth-ubuntu-label"></span><h2>Step 14: Stop Sawtooth Components<a class="headerlink" href="#step-14-stop-sawtooth-components" title="Permalink to this headline">¶</a></h2>
<p>Use this procedure if you need to stop or reset the Sawtooth environment for any
reason.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This application development environment is used in later procedures in this
guide. Do not stop this environment if you intend to continue with these
procedures.</p>
</div>
<p>To stop the Sawtooth components:</p>
<ol class="arabic">
<li><p>Stop the validator by entering CTRL-c in the validator terminal window.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A single CTRL-c does a graceful shutdown. If you prefer not to wait, you
can enter multiple CTRL-c characters to force the shutdown.</p>
</div>
</li>
<li><p>Stop the Devmode consensus engine by entering a single CTRL-c in consensus terminal window.</p></li>
<li><p>Stop the REST API by entering a single CTRL-c in REST API terminal window.</p></li>
<li><p>Stop each transaction processor by entering a single CTRL-c in the
appropriate window.</p></li>
</ol>
<p>You can restart the Sawtooth components at a later time and continue working
with your application development environment.</p>
<p>To completely reset the Sawtooth environment and start over from the beginning
of this procedure, add these steps:</p>
<ul class="simple">
<li><p>To delete the blockchain data, remove all files from <code class="docutils literal notranslate"><span class="pre">/var/lib/sawtooth</span></code>.</p></li>
<li><p>To delete the Sawtooth logs, remove all files from <code class="docutils literal notranslate"><span class="pre">/var/log/sawtooth/</span></code>.</p></li>
<li><p>To delete the Sawtooth keys, remove the key files
<code class="docutils literal notranslate"><span class="pre">/etc/sawtooth/keys/validator.\*</span></code> and
<code class="docutils literal notranslate"><span class="pre">/home/</span></code><cite>yourname</cite><code class="docutils literal notranslate"><span class="pre">/.sawtooth/keys/</span></code><cite>yourname</cite><code class="docutils literal notranslate"><span class="pre">.\*</span></code>.</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="creating_sawtooth_network.html" class="btn btn-neutral float-right" title="Creating a Sawtooth Test Network" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="kubernetes.html" class="btn btn-neutral float-left" title="Using Kubernetes for a Single Sawtooth Node" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2015-2017, Intel Corporation

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>