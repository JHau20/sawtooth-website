

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>XO Transaction Family &mdash; Sawtooth v1.2.3 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="PoET Validator Registry Transaction Family" href="validator_registry_transaction_family.html" />
    <link rel="prev" title="IntegerKey Transaction Family" href="integerkey_transaction_family.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../contents.html" class="icon icon-home"> Sawtooth
          

          
          </a>

          
            
            
              <div class="version">
                v1.2.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app_developers_guide.html">Application Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">Architecture Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../transaction_family_specifications.html">Transaction Family Specifications</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="settings_transaction_family.html">Settings Transaction Family</a></li>
<li class="toctree-l2"><a class="reference internal" href="identity_transaction_family.html">Identity Transaction Family</a></li>
<li class="toctree-l2"><a class="reference internal" href="blockinfo_transaction_family.html">BlockInfo Transaction Family</a></li>
<li class="toctree-l2"><a class="reference internal" href="integerkey_transaction_family.html">IntegerKey Transaction Family</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">XO Transaction Family</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#state">State</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#addressing">Addressing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#transaction-payload">Transaction Payload</a></li>
<li class="toctree-l3"><a class="reference internal" href="#transaction-header">Transaction Header</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#inputs-and-outputs">Inputs and Outputs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="#family">Family</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#execution">Execution</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="validator_registry_transaction_family.html">PoET Validator Registry Transaction Family</a></li>
<li class="toctree-l2"><a class="reference internal" href="smallbank_transaction_family.html">Smallbank Transaction Family</a></li>
<li class="toctree-l2"><a class="reference external" href="https://sawtooth.hyperledger.org/docs/sabre/releases/v1.2.3/">Sawtooth Sabre Transaction Family</a></li>
<li class="toctree-l2"><a class="reference external" href="https://sawtooth.hyperledger.org/docs/seth/nightly/master/">Sawtooth Seth Transaction Family</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sysadmin_guide.html">System Administrator’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_references.html">SDK and API References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">CLI Command Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../contents.html">Sawtooth</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../contents.html">Docs</a> &raquo;</li>
        
          <li><a href="../transaction_family_specifications.html">Transaction Family Specifications</a> &raquo;</li>
        
      <li>XO Transaction Family</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/transaction_family_specifications/xo_transaction_family.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="xo-transaction-family">
<h1>XO Transaction Family<a class="headerlink" href="#xo-transaction-family" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The XO transaction family allows users to play the simple board game
<a class="reference external" href="https://en.wikipedia.org/wiki/Tic-tac-toe">tic-tac-toe</a> (also known as
<em>Noughts and Crosses</em> or <em>X’s and O’s</em>). For more information, see
<a class="reference internal" href="../app_developers_guide/intro_xo_transaction_family.html"><span class="doc">Playing with the XO Transaction Family</span></a>.</p>
</div>
<div class="section" id="state">
<h2>State<a class="headerlink" href="#state" title="Permalink to this headline">¶</a></h2>
<p>An XO state entry consists of the UTF-8 encoding of a string with
exactly four commas, which is formatted as follows:</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;name&gt;,&lt;board&gt;,&lt;game-state&gt;,&lt;player-key-1&gt;,&lt;player-key-2&gt;</span></code></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;name&gt;</span></code> is the game name as a non-empty string not containing the
character <code class="docutils literal notranslate"><span class="pre">|</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;board&gt;</span></code> represents the game board as a string of length 9 containing only
<cite>O</cite>, <cite>X</cite>, or <cite>-</cite></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;game-state&gt;</span></code> is one of the following: <cite>P1-NEXT</cite>, <cite>P2-NEXT</cite>, <cite>P1-WIN</cite>,
<cite>P2-WIN</cite>, or <cite>TIE</cite></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;player-key-1&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;player-key-2&gt;</span></code> are the (possibly empty) public keys
associated with the game’s players</p></li>
</ul>
<p>In the event of a hash collision (two or more state entries
sharing the same address), the colliding state entries will stored as
the UTF-8 encoding of the string <code class="docutils literal notranslate"><span class="pre">&lt;a-entry&gt;|&lt;b-entry&gt;|...</span></code>, where
the entries are sorted alphabetically.</p>
<div class="section" id="addressing">
<h3>Addressing<a class="headerlink" href="#addressing" title="Permalink to this headline">¶</a></h3>
<p>XO data is stored in state using addresses generated from the XO
family name and the name of the game being stored. In particular, an
XO address consists of the first 6 characters of the SHA-512 hash of
the UTF-8 encoding of the string “xo” (which is “5b7349”) plus the
first 64 characters of the SHA-512 hash of the UTF-8 encoding of the
game name.</p>
<p>For example, the XO address for a game called “mygame” could be
generated as follows:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hashlib</span><span class="o">.</span><span class="n">sha512</span><span class="p">(</span><span class="s1">&#39;xo&#39;</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()[:</span><span class="mi">6</span><span class="p">]</span> <span class="o">+</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha512</span><span class="p">(</span><span class="s1">&#39;mygame&#39;</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()[:</span><span class="mi">64</span><span class="p">]</span>
<span class="go">&#39;5b7349700e158b598043efd6d7610345a75a00b22ac14c9278db53f586179a92b72fbd&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="transaction-payload">
<h2>Transaction Payload<a class="headerlink" href="#transaction-payload" title="Permalink to this headline">¶</a></h2>
<p>An XO transaction request payload consists of the UTF-8 encoding of a
string with exactly two commas, which is formatted as follows:</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;name&gt;,&lt;action&gt;,&lt;space&gt;</span></code></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;name&gt;</span></code> is the game name as a non-empty string not containing the character
<code class="docutils literal notranslate"><span class="pre">|</span></code>. If <code class="docutils literal notranslate"><span class="pre">&lt;action&gt;</span></code> is <cite>create</cite>, the new name must be unique.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;action&gt;</span></code> is the game action: <cite>create</cite>, <cite>take</cite>, or <cite>delete</cite></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;space&gt;</span></code> is the location on the board, as an integer between 1-9
(inclusive), if <code class="docutils literal notranslate"><span class="pre">&lt;action&gt;</span></code> is <cite>take</cite></p></li>
</ul>
</div>
<div class="section" id="transaction-header">
<h2>Transaction Header<a class="headerlink" href="#transaction-header" title="Permalink to this headline">¶</a></h2>
<div class="section" id="inputs-and-outputs">
<h3>Inputs and Outputs<a class="headerlink" href="#inputs-and-outputs" title="Permalink to this headline">¶</a></h3>
<p>The inputs and outputs for an XO transaction are just the state
address generated from the transaction game name.</p>
</div>
<div class="section" id="dependencies">
<h3>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h3>
<p>XO transactions have no explicit dependencies.</p>
</div>
<div class="section" id="family">
<h3>Family<a class="headerlink" href="#family" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>family_name: “xo”</p></li>
<li><p>family_version: “1.0”</p></li>
</ul>
</div>
</div>
<div class="section" id="execution">
<span id="xo-execution-label"></span><h2>Execution<a class="headerlink" href="#execution" title="Permalink to this headline">¶</a></h2>
<p>The XO transaction processor receives a transaction request and a
state dictionary. If it is valid, the transaction request payload will
have a game name, an action, and, if the action is <cite>take</cite>, a space.</p>
<ol class="arabic">
<li><p>If the action is <cite>create</cite>, the transaction is invalid if the
game name is already in state dictionary. Otherwise, the transaction
processor will store a new state entry with board <cite>———</cite> (i.e. a blank
board), game state <cite>P1-NEXT</cite>, and empty strings for both player
keys.</p></li>
<li><p>If the action is <cite>take</cite>, the transaction is invalid if the
game name is not in the state dictionary. Otherwise, there is a
state entry under the game name with a board, game state, player-1
key, and player-2 key. The transaction is invalid if:</p>
<ul class="simple">
<li><p>the game state is <cite>P1-WIN</cite>, <cite>P2-WIN</cite>, or <cite>TIE</cite>, or</p></li>
<li><p>the game state is <cite>P1-NEXT</cite> and the player-1 key is not null and different
from the transaction signing key, or</p></li>
<li><p>the game state is <cite>P2-NEXT</cite> and the player-2 key is nonnull and different
from the transaction signing key, or</p></li>
<li><p>the space-th character in the board-string is not <cite>-</cite>.</p></li>
</ul>
<p>Otherwise, the transaction processor will update the state entry
according to the following rules:</p>
<ol class="loweralpha simple">
<li><p>Player keys - If the player-1 key is null (the empty string), it
will be updated to key with which the transaction was signed. If
the player-1 key is nonnull and the player-2 key is null, the
player-2 will be updated to the signing key. Otherwise, the
player keys will not be changed.</p></li>
<li><p>Board - If the game state is <cite>P1-NEXT</cite>, the updated board will
be the same as the initial board except with the space-th
character replaced by the character <cite>X</cite>, and the same for the
state <cite>P2-NEXT</cite> and the character <cite>O</cite>.</p></li>
<li><p>Game state - Call the first three characters of the board string
its first row, the next three characters its second row, and the
last three characters its third row.If any of the rows consist
of the same character, say that character has a <em>win</em> on the
board. If all the rows have the same first character or the same
second character or the same third character (the board’s
columns), that character has a win on the board. If the first
character of the first row and the second character of the
second row and the third character of the third row are the
same, or if the third character of the first row and the second
character of the second row and the first character of the third
row are the same, that character has a win on the board.</p>
<ul class="simple">
<li><p>If <cite>X</cite> has a win on the board and <cite>O</cite> doesn’t, the updated state will be
<cite>P1-WINS</cite>.</p></li>
<li><p>If <cite>O</cite> has a win on the board and <cite>X</cite> doesn’t, the updated state will be
<cite>P2-WINS</cite>.</p></li>
<li><p>Otherwise, if the updated board doesn’t contain <cite>-</cite> (if the board has no
empty spaces), the updated state will be <cite>TIE</cite>.</p></li>
<li><p>Otherwise, the updated state will be <cite>P2-NEXT</cite> if the initial state is
<cite>P1-NEXT</cite> and <cite>P1-NEXT</cite> and if the initial state is <cite>P2-NEXT</cite>.</p></li>
</ul>
</li>
</ol>
</li>
<li><p>If the action is <cite>delete</cite>, the transaction is invalid if the game name is not
in the state dictionary. Otherwise, the transaction processor will delete the
state entry for the game.</p></li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="validator_registry_transaction_family.html" class="btn btn-neutral float-right" title="PoET Validator Registry Transaction Family" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="integerkey_transaction_family.html" class="btn btn-neutral float-left" title="IntegerKey Transaction Family" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015-2017, Intel Corporation

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>