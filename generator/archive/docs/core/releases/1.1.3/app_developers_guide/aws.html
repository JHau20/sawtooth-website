

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using AWS with Sawtooth &mdash; Sawtooth v1.1.3 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Using Kubernetes for Your Development Environment" href="kubernetes.html" />
    <link rel="prev" title="Using Ubuntu for Your Development Environment" href="ubuntu.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../contents.html" class="icon icon-home"> Sawtooth
          

          
          </a>

          
            
            
              <div class="version">
                v1.1.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../app_developers_guide.html">Application Developer’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">Transaction Family Overview</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="installing_sawtooth.html">Setting Up a Sawtooth Application Development Environment</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="docker.html">Using Docker for your Development Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="ubuntu.html">Using Ubuntu for Your Development Environment</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Using AWS with Sawtooth</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#about-the-application-development-environment">About the Application Development Environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-1-launch-a-sawtooth-instance">Step 1: Launch a Sawtooth Instance</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-2-check-the-status-of-sawtooth-components">Step 2: Check the Status of Sawtooth Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-3-confirm-connectivity-to-the-rest-api">Step 3: Confirm Connectivity to the REST API</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-4-use-sawtooth-commands-as-a-client">Step 4: Use Sawtooth Commands as a Client</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-5-examine-sawtooth-logs">Step 5: Examine Sawtooth Logs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-6-reset-the-aws-environment-optional">Step 6: Reset the AWS Environment (Optional)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="kubernetes.html">Using Kubernetes for Your Development Environment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="creating_sawtooth_network.html">Creating a Sawtooth Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_xo_transaction_family.html">Playing with the XO Transaction Family</a></li>
<li class="toctree-l2"><a class="reference internal" href="using_the_sdks.html">Using the Sawtooth SDKs</a></li>
<li class="toctree-l2"><a class="reference internal" href="no_sdk.html">Development Without an SDK</a></li>
<li class="toctree-l2"><a class="reference internal" href="address_and_namespace.html">Address and Namespace Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="namespace_restriction.html">Namespace Restriction</a></li>
<li class="toctree-l2"><a class="reference internal" href="event_subscriptions.html">Subscribing to Events</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">Architecture Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../transaction_family_specifications.html">Transaction Family Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sysadmin_guide.html">System Administrator’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_references.html">API References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">CLI Command Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../contents.html">Sawtooth</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../contents.html">Docs</a> &raquo;</li>
        
          <li><a href="../app_developers_guide.html">Application Developer’s Guide</a> &raquo;</li>
        
          <li><a href="installing_sawtooth.html">Setting Up a Sawtooth Application Development Environment</a> &raquo;</li>
        
      <li>Using AWS with Sawtooth</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/app_developers_guide/aws.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-aws-with-sawtooth">
<h1>Using AWS with Sawtooth<a class="headerlink" href="#using-aws-with-sawtooth" title="Permalink to this headline">¶</a></h1>
<p>This tutorial explains how to set up Hyperledger Sawtooth for application
development using the Amazon Elastic Compute Cloud (Amazon EC2) service.
It shows you how to launch an instance of a Sawtooth validator node from the
<a class="reference external" href="https://aws.amazon.com/marketplace/pp/B075TKQCC2">Amazon Web Services (AWS) Marketplace</a>,
then walks you through the following tasks:</p>
<blockquote>
<div><ul class="simple">
<li>Checking the status of Sawtooth components</li>
<li>Using Sawtooth commands to submit transactions, display block data, and view
global state</li>
<li>Examining Sawtooth logs</li>
<li>Resetting the AWS Sawtooth instance</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This environment requires an AWS account. If you don’t have one yet, Amazon
provides free accounts so you can try the Sawtooth platform. Sign up at
<a class="reference external" href="https://aws.amazon.com/free/">aws.amazon.com/free</a>.</p>
</div>
<p>After completing this tutorial, you will have the application development
environment that is required for the other tutorials in this guide. The next
tutorial introduces the XO transaction family by using the <code class="docutils literal notranslate"><span class="pre">xo</span></code> client
commands to play a game of tic-tac-toe. The final set of tutorials describe how
to use an SDK to create a transaction family that implements your application’s
business logic.</p>
<div class="section" id="about-the-application-development-environment">
<h2>About the Application Development Environment<a class="headerlink" href="#about-the-application-development-environment" title="Permalink to this headline">¶</a></h2>
<p>The AWS application development environment is a single validator node that is
running a validator, a REST API, and three transaction processors. This
environment uses Developer mode (dev mode) consensus and serial transaction
processing.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/appdev-environment-one-node-3TPs.svg"><img alt="AWS: Sawtooth application environment with one node" src="../_images/appdev-environment-one-node-3TPs.svg" width="100%" /></a>
</div>
<p>This environment introduces basic Sawtooth functionality with the
<a class="reference external" href="../transaction_family_specifications/integerkey_transaction_family">IntegerKey</a>
and
<a class="reference external" href="../transaction_family_specifications/settings_transaction_family">Settings</a>
transaction processors for the business logic and Sawtooth commands as a client.
It also includes the
<a class="reference external" href="../transaction_family_specifications/xo_transaction_family">XO</a>
transaction processor, which is used in the advanced tutorials.</p>
<p>The IntegerKey and XO families are simple examples of a transaction family, but
Settings is a reference implementation. In a production environment, you should
always run a transaction processor that supports the Settings transaction
family.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Amazon Machine Image (AMI) for Sawtooth has a <code class="docutils literal notranslate"><span class="pre">systemd</span></code> service that
handles environment setup steps such as generating keys and creating a
genesis block. To learn how the typical startup process works, see
<a class="reference internal" href="ubuntu.html"><span class="doc">Using Ubuntu for Your Development Environment</span></a>.</p>
</div>
</div>
<div class="section" id="step-1-launch-a-sawtooth-instance">
<h2>Step 1: Launch a Sawtooth Instance<a class="headerlink" href="#step-1-launch-a-sawtooth-instance" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Launch a Sawtooth instance from the <a class="reference external" href="https://aws.amazon.com/marketplace/pp/B075TKQCC2">Hyperledger Sawtooth product page
on the AWS Marketplace</a>.
For more information, see the Amazon guide
<a class="reference external" href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/launch-marketplace-console.html">Launching an AWS Marketplace Instance</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The default security group with recommended settings for Sawtooth
allows inbound SSH traffic only.</p>
<ul class="simple">
<li>To attach a transaction processor remotely, add an inbound rule to
allow TCP traffic on port 4004.</li>
<li>To access the REST API remotely, add an inbound rule to allow TCP
traffic on port 8008.</li>
<li>To communicate with another validator node, add an inbound rule to
allow TCP traffic on port 8800.</li>
</ul>
<p class="last">For information on editing the security group rules, see Amazon’s
Security Groups documentation,
<a class="reference external" href="http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_SecurityGroups.html#AddRemoveRules">Adding, Removing, and Updating Rules</a>.</p>
</div>
</li>
<li><p class="first">Log into this Sawtooth instance. Use the user name <code class="docutils literal notranslate"><span class="pre">ubuntu</span></code> when
connecting.</p>
<p>For more information, see the Amazon guide
<a class="reference external" href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AccessingInstances.html">Connect to Your Linux Instance</a>.</p>
</li>
</ol>
<p>Once launched, the Sawtooth instance continues to run until you stop it.
If you’re uncertain about the state or would like to start over, see
<a class="reference internal" href="#reset-aws-ubuntu-label"><span class="std std-ref">Step 6: Reset the AWS Environment (Optional)</span></a>.</p>
</div>
<div class="section" id="step-2-check-the-status-of-sawtooth-components">
<span id="confirming-connectivity-aws-label"></span><h2>Step 2: Check the Status of Sawtooth Components<a class="headerlink" href="#step-2-check-the-status-of-sawtooth-components" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">You can use <code class="docutils literal notranslate"><span class="pre">ps</span></code> to check that each Sawtooth component is running:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ps aux <span class="p">|</span> grep <span class="o">[</span>s<span class="o">]</span>awtooth
<span class="go">sawtooth 27556 32.3  2.5 5371560864 407176 ?   Ssl  15:15  15:53 /usr/bin/python3 /usr/bin/sawtooth-validator</span>
<span class="go">sawtooth 27592  1.1  0.2 305796 38816 ?        Ssl  15:15   0:33 /usr/bin/python3 /usr/bin/sawtooth-rest-api</span>
<span class="go">sawtooth 27622  0.0  0.2 278176 33708 ?        Ssl  15:15   0:00 /usr/bin/python3 /usr/bin/identity-tp -v -C tcp://localhost:4004</span>
<span class="go">sawtooth 27712  0.0  0.2 278172 33632 ?        Ssl  15:15   0:00 /usr/bin/python3 /usr/bin/settings-tp -C tcp://localhost:4004</span>
</pre></div>
</div>
</li>
<li><p class="first">Or you can use <code class="docutils literal notranslate"><span class="pre">systemctl</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> systemctl <span class="p">|</span> grep <span class="o">[</span>s<span class="o">]</span>awtooth
<span class="go">sawtooth-identity-tp.service</span>
<span class="go">     loaded active running   Sawtooth TP Identity</span>
<span class="go">sawtooth-rest-api.service</span>
<span class="go">     loaded active running   Sawtooth REST API</span>
<span class="go">sawtooth-settings-tp.service</span>
<span class="go">     loaded active running   Sawtooth TP Settings</span>
<span class="go">sawtooth-validator.service</span>
<span class="go">     loaded active running   Sawtooth Validator Server</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="step-3-confirm-connectivity-to-the-rest-api">
<h2>Step 3: Confirm Connectivity to the REST API<a class="headerlink" href="#step-3-confirm-connectivity-to-the-rest-api" title="Permalink to this headline">¶</a></h2>
<p>Confirm that you can connect to the REST API from your host system. Enter
the following <code class="docutils literal notranslate"><span class="pre">curl</span></code> command from a terminal window:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> curl http://localhost:8008/blocks
</pre></div>
</div>
</div>
<div class="section" id="step-4-use-sawtooth-commands-as-a-client">
<span id="configure-tf-settings-aws-label"></span><h2>Step 4: Use Sawtooth Commands as a Client<a class="headerlink" href="#step-4-use-sawtooth-commands-as-a-client" title="Permalink to this headline">¶</a></h2>
<p>Sawtooth includes commands that act as a client application. This step describes
how to use the <code class="docutils literal notranslate"><span class="pre">intkey</span></code> and <code class="docutils literal notranslate"><span class="pre">sawtooth</span></code> commands to create and submit
transactions, display blockchain and block data, and examine global state data.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Use the <code class="docutils literal notranslate"><span class="pre">--help</span></code> option with any Sawtooth command to display the available
options and subcommands.</p>
</div>
<div class="section" id="creating-and-submiting-transactions-with-intkey">
<h3>Creating and Submiting Transactions with intkey<a class="headerlink" href="#creating-and-submiting-transactions-with-intkey" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">intkey</span></code> command creates sample IntegerKey transactions for testing
purposes.</p>
<ol class="arabic">
<li><p class="first">Use <code class="docutils literal notranslate"><span class="pre">intkey</span> <span class="pre">create_batch</span></code> to prepare batches of transactions that set
a few keys to random values, then randomly increment and decrement those
values. These batches are saved locally in the file <code class="docutils literal notranslate"><span class="pre">batches.intkey</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> intkey create_batch --count <span class="m">10</span> --key-count <span class="m">5</span>
<span class="go">Writing to batches.intkey...</span>
</pre></div>
</div>
</li>
<li><p class="first">Use <code class="docutils literal notranslate"><span class="pre">intkey</span> <span class="pre">load</span></code> to submit the batches to the validator.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> intkey load
<span class="go">batches: 11 batch/sec: 141.7800162868952</span>
</pre></div>
</div>
</li>
<li><p class="first">The validator displays many log messages showing that the validator is
handling the submitted transactions and processing blocks, as in
this truncated example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">...</span>
<span class="go">78c295614594319ece3fac71145c05ca36fadc3bd6e65 (block_num:13, state:addbd88bc80ecb05793750b7c80b91588043a1287cd8d4b6e0b1e6a68a0e4017, previous_block_id:f4323dfc238938db834aa5d40b4e6c2825bf7eae5cdaf73a9da28cb308a765707e85ac06e72b01e3d7d529132329b55b18d0cc71ab026506edd63bc6b718e80a)^[[0m</span>
<span class="go">[2018-03-14 16:24:49.621 INFO     chain] Starting block validation of : 60c0c348a00cde622a3664d6d4fb949736b78f8bcb6b77bd0300cdc7675ca9d4116ee23ec18c7cfee5978c295614594319ece3fac71145c05ca36fadc3bd6e65 (block_num:13, state:addbd88bc80ecb05793750b7c80b91588043a1287cd8d4b6e0b1e6a68a0e4017, previous_block_id:f4323dfc238938db834aa5d40b4e6c2825bf7eae5cdaf73a9da28cb308a765707e85ac06e72b01e3d7d529132329b55b18d0cc71ab026506edd63bc6b718e80a)</span>
<span class="go">[2018-03-14 16:24:49.646 INFO     chain] Comparing current chain head &#39;f4323dfc238938db834aa5d40b4e6c2825bf7eae5cdaf73a9da28cb308a765707e85ac06e72b01e3d7d529132329b55b18d0cc71ab026506edd63bc6b718e80a (block_num:12, state:c30ed78dde19d9ff58587a8bdd4aa435e09212cd1fee3e95d88faafe44f207cc, previous_block_id:dc98ce9029e6e3527bca18060cbb1325b545054b1589f2df7bf200fb0a09d0572491a3837dea1baf2981f5a960bd108f198806c974efcb3b69d2712809cc6065)&#39; against new block &#39;60c0c348a00cde622a3664d6d4fb949736b78f8bcb6b77bd0300cdc7675ca9d4116ee23ec18c7cfee5978c295614594319ece3fac71145c05ca36fadc3bd6e65 (block_num:13, state:addbd88bc80ecb05793750b7c80b91588043a1287cd8d4b6e0b1e6a68a0e4017, previous_block_id:f4323dfc238938db834aa5d40b4e6c2825bf7eae5cdaf73a9da28cb308a765707e85ac06e72b01e3d7d529132329b55b18d0cc71ab026506edd63bc6b718e80a)&#39;</span>
<span class="go">[2018-03-14 16:24:49.647 INFO     chain] Fork comparison at height 13 is between - and 60c0c348</span>
<span class="go">[2018-03-14 16:24:49.647 INFO     chain] Chain head updated to: 60c0c348a00cde622a3664d6d4fb949736b78f8bcb6b77bd0300cdc7675ca9d4116ee23ec18c7cfee5978c295614594319ece3fac71145c05ca36fadc3bd6e65 (block_num:13, state:addbd88bc80ecb05793750b7c80b91588043a1287cd8d4b6e0b1e6a68a0e4017, previous_block_id:f4323dfc238938db834aa5d40b4e6c2825bf7eae5cdaf73a9da28cb308a765707e85ac06e72b01e3d7d529132329b55b18d0cc71ab026506edd63bc6b718e80a)</span>
<span class="go">[2018-03-14 16:24:49.648 INFO     publisher] Now building on top of block: 60c0c348a00cde622a3664d6d4fb949736b78f8bcb6b77bd0300cdc7675ca9d4116ee23ec18c7cfee5978c295614594319ece3fac71145c05ca36fadc3bd6e65 (block_num:13, state:addbd88bc80ecb05793750b7c80b91588043a1287cd8d4b6e0b1e6a68a0e4017, previous_block_id:f4323dfc238938db834aa5d40b4e6c2825bf7eae5cdaf73a9da28cb308a765707e85ac06e72b01e3d7d529132329b55b18d0cc71ab026506edd63bc6b718e80a)</span>
<span class="go">[2018-03-14 16:24:49.649 DEBUG    chain] Verify descendant blocks: 60c0c348a00cde622a3664d6d4fb949736b78f8bcb6b77bd0300cdc7675ca9d4116ee23ec18c7cfee5978c295614594319ece3fac71145c05ca36fadc3bd6e65 (block_num:13, state:addbd88bc80ecb05793750b7c80b91588043a1287cd8d4b6e0b1e6a68a0e4017, previous_block_id:f4323dfc238938db834aa5d40b4e6c2825bf7eae5cdaf73a9da28cb308a765707e85ac06e72b01e3d7d529132329b55b18d0cc71ab026506edd63bc6b718e80a) ([])</span>
<span class="go">[2018-03-14 16:24:49.651 INFO     chain] Finished block validation of: 60c0c348a00cde622a3664d6d4fb949736b78f8bcb6b77bd0300cdc7675ca9d4116ee23ec18c7cfee5978c295614594319ece3fac71145c05ca36fadc3bd6e65 (block_num:13, state:addbd88bc80ecb05793750b7c80b91588043a1287cd8d4b6e0b1e6a68a0e4017, previous_block_id:f4323dfc238938db834aa5d40b4e6c2825bf7eae5cdaf73a9da28cb308a765707e85ac06e72b01e3d7d529132329b55b18d0cc71ab026506edd63bc6b718e80a)</span>
</pre></div>
</div>
</li>
<li><p class="first">The REST API displays a log message as it communicates with the intkey
transaction processor.</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[2018-03-14 16:24:49.587 INFO     helpers] POST /batches HTTP/1.1: 202 status, 1639 size, in 0.030922 s</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">You can also look at the Sawtooth log files to see what happened. Use the
following command to display the last 10 entries in the intkey log file,
which show that values have been changed.</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">user@client$</span> sudo bash -c <span class="s2">&quot;tail -10 /var/log/sawtooth/intkey-*-debug.log&quot;</span>
<span class="go">[2018-03-14 16:24:49.587 [MainThread] core DEBUG] received message of type: TP_PROCESS_REQUEST</span>
<span class="go">[2018-03-14 16:24:49.588 [MainThread] handler DEBUG] incrementing &quot;MvRznE&quot; by 1</span>
<span class="go">[2018-03-14 16:24:49.624 [MainThread] core DEBUG] received message of type: TP_PROCESS_REQUEST</span>
<span class="go">[2018-03-14 16:24:49.625 [MainThread] handler DEBUG] incrementing &quot;iJWCRq&quot; by 5</span>
<span class="go">[2018-03-14 16:24:49.629 [MainThread] core DEBUG] received message of type: TP_PROCESS_REQUEST</span>
<span class="go">[2018-03-14 16:24:49.630 [MainThread] handler DEBUG] incrementing &quot;vJJL1N&quot; by 8</span>
<span class="go">[2018-03-14 16:24:49.634 [MainThread] core DEBUG] received message of type: TP_PROCESS_REQUEST</span>
<span class="go">[2018-03-14 16:24:49.636 [MainThread] handler DEBUG] incrementing &quot;vsTbBo&quot; by 4</span>
<span class="go">[2018-03-14 16:24:49.639 [MainThread] core DEBUG] received message of type: TP_PROCESS_REQUEST</span>
<span class="go">[2018-03-14 16:24:49.641 [MainThread] handler DEBUG] incrementing &quot;MvRznE&quot; by 1</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The log file names for the transaction processors contain a random
string that is unique for each instance of the transaction processor.
For more information, see <a class="reference internal" href="ubuntu.html#examine-logs-ubuntu-label"><span class="std std-ref">Step 11: Examine Sawtooth Logs</span></a>.</p>
</div>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="submitting-transactions-with-sawtooth-batch-submit">
<h3>Submitting Transactions with sawtooth batch submit<a class="headerlink" href="#submitting-transactions-with-sawtooth-batch-submit" title="Permalink to this headline">¶</a></h3>
<p>In the example above, the <code class="docutils literal notranslate"><span class="pre">intkey</span> <span class="pre">create_batch</span></code> command created the file
<code class="docutils literal notranslate"><span class="pre">batches.intkey</span></code>.  Rather than using <code class="docutils literal notranslate"><span class="pre">intkey</span> <span class="pre">load</span></code> to submit these
transactions, you could use the following command to submit them.</p>
<ol class="arabic">
<li><p class="first">As before, create a batch of transactions.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> intkey create_batch --count <span class="m">10</span> --key-count <span class="m">5</span>
<span class="go">Writing to batches.intkey...</span>
</pre></div>
</div>
</li>
<li><p class="first">Submit the batch file with the following command:</p>
</li>
</ol>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> sawtooth batch submit -f batches.intkey
<span class="go">batches: 11,  batch/sec: 216.80369536716367</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="viewing-blockchain-and-block-data-with-sawtooth-block">
<h3>Viewing Blockchain and Block Data with sawtooth block<a class="headerlink" href="#viewing-blockchain-and-block-data-with-sawtooth-block" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">sawtooth</span> <span class="pre">block</span></code> command displays information about the blocks stored on
the blockchain.</p>
<ol class="arabic">
<li><p class="first">Use <code class="docutils literal notranslate"><span class="pre">sawtooth</span> <span class="pre">block</span> <span class="pre">list</span></code> to display the list of blocks stored in state.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> sawtooth block list
</pre></div>
</div>
<p>The output incudes the block ID, as in this example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">NUM  BLOCK_ID</span>
<span class="go">8    22e79778855768ea380537fb13ad210b84ca5dd1cdd555db7792a9d029113b0a183d5d71cc5558e04d10a9a9d49031de6e86d6a7ddb25325392d15bb7ccfd5b7  2     8     02a0e049...</span>
<span class="go">7    c84346f5e18c6ce29f1b3e6e31534da7cd538533457768f86a267053ddf73c4f1139c9055be283dfe085c94557de24726191eee9996d4192d21fa6acb0b29152  2     20    02a0e049...</span>
<span class="go">6    efc0d6175b6329ac5d0814546190976bc6c4e18bd0630824c91e9826f93c7735371f4565a8e84c706737d360873fac383ab1cf289f9bf640b92c570cb1ba1875  2     27    02a0e049...</span>
<span class="go">5    840c0ef13023f93e853a4555e5b46e761fc822d4e2d9131581fdabe5cb85f13e2fb45a0afd5f5529fbde5216d22a88dddec4b29eeca5ac7a7b1b1813fcc1399a  2     16    02a0e049...</span>
<span class="go">4    4d6e0467431a409185e102301b8bdcbdb9a2b177de99ae139315d9b0fe5e27aa3bd43bda6b168f3ac8f45e84b069292ddc38ec6a1848df16f92cd35c5bd6e6c9  2     20    02a0e049...</span>
<span class="go">3    9743e39eadf20e922e242f607d847445aba18dacdf03170bf71e427046a605744c84d9cb7d440d257c21d11e4da47e535ba7525afcbbc037da226db48a18f4a8  2     22    02a0e049...</span>
<span class="go">2    6d7e641232649da9b3c23413a31db09ebec7c66f8207a39c6dfcb21392b033163500d367f8592b476e0b9c1e621d6c14e8c0546a7377d9093fb860a00c1ce2d3  2     38    02a0e049...</span>
<span class="go">1    7252a5ab3440ee332aef5830b132cf9dc3883180fb086b2a50f62bf7c6c8ff08311b8009da3b3f6e38d3cfac1b3ac4cfd9a864d6a053c8b27df63d1c730469b3  2     120   02a0e049...</span>
<span class="go">0    8821a997796f3e38a28dbb8e418ed5cbdd60b8a2e013edd20bca7ebf9a58f1302740374d98db76137e48b41dc404deda40ca4d2303a349133991513d0fec4074  0     0     02a0e049...</span>
</pre></div>
</div>
</li>
<li><p class="first">From the output generated by <code class="docutils literal notranslate"><span class="pre">sawtooth</span> <span class="pre">block</span> <span class="pre">list</span></code>, copy the ID of a block
you want to view, then paste it in place of <code class="docutils literal notranslate"><span class="pre">{BLOCK_ID}</span></code> in the following
command.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> sawtooth block show <span class="o">{</span>BLOCK_ID<span class="o">}</span>
</pre></div>
</div>
<p>The output of this command can be quite long, because it includes all data
stored under that block. This is a truncated example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">batches:</span>
<span class="go">- header:</span>
<span class="go">    signer_public_key: 0276023d4f7323103db8d8683a4b7bc1eae1f66fbbf79c20a51185f589e2d304ce</span>
<span class="go">    transaction_ids:</span>
<span class="go">    - 24b168aaf5ea4a76a6c316924a1c26df0878908682ea5740dd70814e7c400d56354dee788191be8e28393c70398906fb467fac8db6279e90e4e61619589d42bf</span>
<span class="go">  header_signature: a93731646a8fd2bce03b3a17bc2cb3192d8597da93ce735950dccbf0e3cf0b005468fadb94732e013be0bc2afb320be159b452cf835b35870db5fa953220fb35</span>
<span class="go">  transactions:</span>
<span class="go">  - header:</span>
<span class="go">      batcher_public_key: 0276023d4f7323103db8d8683a4b7bc1eae1f66fbbf79c20a51185f589e2d304ce</span>
<span class="go">      dependencies: []</span>
<span class="go">      family_name: sawtooth_settings</span>
<span class="go">      family_version: &#39;1.0&#39;</span>
<span class="go">...</span>
<span class="go">header:</span>
<span class="go">  batch_ids:</span>
<span class="go">  - a93731646a8fd2bce03b3a17bc2cb3192d8597da93ce735950dccbf0e3cf0b005468fadb94732e013be0bc2afb320be159b452cf835b35870db5fa953220fb35</span>
<span class="go">  block_num: 3</span>
<span class="go">  consensus: RGV2bW9kZQ==</span>
<span class="go">  previous_block_id: 042f08e1ff49bbf16914a53dc9056fb6e522ca0e2cff872547eac9555c1de2a6200e67fb9daae6dfb90f02bef6a9088e94e5bdece04f622bce67ccecd678d56e</span>
<span class="go">  signer_public_key: 033fbed13b51eafaca8d1a27abc0d4daf14aab8c0cbc1bb4735c01ff80d6581c52</span>
<span class="go">  state_root_hash: 5d5ea37cbbf8fe793b6ea4c1ba6738f5eee8fc4c73cdca797736f5afeb41fbef</span>
<span class="go">header_signature: ff4f6705bf57e2a1498dc1b649cc9b6a4da2cc8367f1b70c02bc6e7f648a28b53b5f6ad7c2aa639673d873959f5d3fcc11129858ecfcb4d22c79b6845f96c5e3</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="viewing-state-data-with-sawtooth-state">
<h3>Viewing State Data with sawtooth state<a class="headerlink" href="#viewing-state-data-with-sawtooth-state" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">sawtooth</span> <span class="pre">state</span></code> command lets you display state data. Sawtooth stores
state data in a <a class="reference internal" href="../glossary.html#term-merkle-radix-tree"><span class="xref std std-term">Merkle-Radix tree</span></a>; for more information, see
<a class="reference internal" href="../architecture/global_state.html"><span class="doc">Global State</span></a>.</p>
<ol class="arabic">
<li><p class="first">Use <code class="docutils literal notranslate"><span class="pre">sawtooth</span> <span class="pre">state</span> <span class="pre">list</span></code> to list the nodes (addresses) in state:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> sawtooth state list
</pre></div>
</div>
<p>The output will be similar to this truncated example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ADDRESS                                                                                                                                SIZE DATA</span>
<span class="go">1cf126ddb507c936e4ee2ed07aa253c2f4e7487af3a0425f0dc7321f94be02950a081ab7058bf046c788dbaf0f10a980763e023cde0ee282585b9855e6e5f3715bf1fe 11   b&#39;\xa1fcCTdcH\x...</span>
<span class="go">1cf1260cd1c2492b6e700d5ef65f136051251502e5d4579827dc303f7ed76ddb7185a19be0c6443503594c3734141d2bdcf5748a2d8c75541a8e568bae063983ea27b9 11   b&#39;\xa1frdLONu\x...</span>
<span class="go">1cf126ed7d0ac4f755be5dd040e2dfcd71c616e697943f542682a2feb14d5f146538c643b19bcfc8c4554c9012e56209f94efe580b6a94fb326be9bf5bc9e177d6af52 11   b&#39;\xa1fAUZZqk\x...</span>
<span class="go">1cf126c46ff13fcd55713bcfcf7b66eba515a51965e9afa8b4ff3743dc6713f4c40b4254df1a2265d64d58afa14a0051d3e38999704f6e25c80bed29ef9b80aee15c65 11   b&#39;\xa1fLvUYLk\x...</span>
<span class="go">1cf126c4b1b09ebf28775b4923e5273c4c01ba89b961e6a9984632612ec9b5af82a0f7c8fc1a44b9ae33bb88f4ed39b590d4774dc43c04c9a9bd89654bbee68c8166f0 13   b&#39;\xa1fXHonWY\x...</span>
<span class="go">1cf126e924a506fb2c4bb8d167d20f07d653de2447df2754de9eb61826176c7896205a17e363e457c36ccd2b7c124516a9b573d9a6142f031499b18c127df47798131a 13   b&#39;\xa1foWZXEz\x...</span>
<span class="go">1cf126c295a476acf935cd65909ed5ead2ec0168f3ee761dc6f37ea9558fc4e32b71504bf0ad56342a6671db82cb8682d64689838731da34c157fa045c236c97f1dd80 13   b&#39;\xa1fadKGve\x...</span>
</pre></div>
</div>
</li>
<li><p class="first">Use <code class="docutils literal notranslate"><span class="pre">sawtooth</span> <span class="pre">state</span> <span class="pre">show</span></code> to view state data at a specific address (a node
in the Merkle-Radix database). Copy the address from the output of
<code class="docutils literal notranslate"><span class="pre">sawtooth</span> <span class="pre">state</span> <span class="pre">list</span></code>, then paste it in place of <code class="docutils literal notranslate"><span class="pre">{STATE_ADDRESS}</span></code> in
the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> sawtooth state show <span class="o">{</span>STATE_ADDRESS<span class="o">}</span>
</pre></div>
</div>
<p>The output shows the bytes stored at that address and the block ID of the
“chain head” that the current state is tied to, as in this example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">DATA: &quot;b&#39;\xa1fcCTdcH\x192B&#39;&quot;</span>
<span class="go">HEAD: &quot;0c4364c6d5181282a1c7653038ec9515cb0530c6bfcb46f16e79b77cb524491676638339e8ff8e3cc57155c6d920e6a4d1f53947a31dc02908bcf68a91315ad5&quot;</span>
</pre></div>
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="step-5-examine-sawtooth-logs">
<span id="examine-logs-aws-label"></span><h2>Step 5: Examine Sawtooth Logs<a class="headerlink" href="#step-5-examine-sawtooth-logs" title="Permalink to this headline">¶</a></h2>
<p>By default, Sawtooth logs are stored in the directory <code class="docutils literal notranslate"><span class="pre">/var/log/sawtooth</span></code>.
Each component (validator, REST API, and transaction processors) has both a
debug log and an error log. This example shows the log files for this
application development environment:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ls -1 /var/log/sawtooth
<span class="go">identity-f5c42a08548c4ffa-debug.log</span>
<span class="go">identity-f5c42a08548c4ffa-error.log</span>
<span class="go">intkey-ae98c3726f9743c4-debug.log</span>
<span class="go">intkey-ae98c3726f9743c4-error.log</span>
<span class="go">rest_api-debug.log</span>
<span class="go">rest_api-error.log</span>
<span class="go">settings-6d591c44915b465c-debug.log</span>
<span class="go">settings-6d591c44915b465c-error.log</span>
<span class="go">validator-debug.log</span>
<span class="go">validator-error.log</span>
<span class="go">xo-9b8b55265ca0d546-error.log</span>
<span class="go">xo-9b8b55265ca0d546-debug.log</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For the transaction processors, the log file names contain a random string to
make the names unique. This string changes for each instance of a transaction
processor. The file names on your system will be different than these
examples.</p>
</div>
<p>For more information on log files, see
<a class="reference internal" href="../sysadmin_guide/log_configuration.html"><span class="doc">Log Configuration File</span></a>.</p>
</div>
<div class="section" id="step-6-reset-the-aws-environment-optional">
<span id="reset-aws-ubuntu-label"></span><h2>Step 6: Reset the AWS Environment (Optional)<a class="headerlink" href="#step-6-reset-the-aws-environment-optional" title="Permalink to this headline">¶</a></h2>
<p>When you are done with the AWS environment (or if you want to reset it), you can
use the following commands to restore the Sawtooth instance to its original
state.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> sudo rm /var/lib/sawtooth/config-genesis.batch
<span class="gp">$</span> sudo systemctl restart sawtooth-setup.service
</pre></div>
</div>
<p>The first command removes the file <code class="docutils literal notranslate"><span class="pre">config-genesis.batch</span></code>. The second command
restarts the <code class="docutils literal notranslate"><span class="pre">sawtooth-setup</span></code> service, which cleans up your validator, creates
a new genesis block, and restarts the <code class="docutils literal notranslate"><span class="pre">sawtooth-validator</span></code> service so that
you’re ready to build on a new blockchain.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="kubernetes.html" class="btn btn-neutral float-right" title="Using Kubernetes for Your Development Environment" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ubuntu.html" class="btn btn-neutral" title="Using Ubuntu for Your Development Environment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015-2017, Intel Corporation

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>