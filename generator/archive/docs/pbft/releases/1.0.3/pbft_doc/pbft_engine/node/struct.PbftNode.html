<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `PbftNode` struct in crate `pbft_engine`."><meta name="keywords" content="rust, rustlang, rust-lang, PbftNode"><title>pbft_engine::node::PbftNode - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css"><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script src="../../storage.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="shortcut icon" href="../../favicon.ico"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc struct"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../pbft_engine/index.html'><div class='logo-container'><img src='../../rust-logo.png' alt='logo'></div></a><p class='location'>Struct PbftNode</p><div class="sidebar-elems"><div class="block items"><a class="sidebar-title" href="#fields">Fields</a><div class="sidebar-links"><a href="#structfield.msg_log">msg_log</a><a href="#structfield.service">service</a></div><a class="sidebar-title" href="#implementations">Methods</a><div class="sidebar-links"><a href="#method.broadcast_bootstrap_commit">broadcast_bootstrap_commit</a><a href="#method.broadcast_message">broadcast_message</a><a href="#method.broadcast_pbft_message">broadcast_pbft_message</a><a href="#method.build_seal">build_seal</a><a href="#method.catchup">catchup</a><a href="#method.check_commit_timeout_expired">check_commit_timeout_expired</a><a href="#method.check_idle_timeout_expired">check_idle_timeout_expired</a><a href="#method.check_view_change_timeout_expired">check_view_change_timeout_expired</a><a href="#method.handle_commit">handle_commit</a><a href="#method.handle_new_view">handle_new_view</a><a href="#method.handle_pre_prepare">handle_pre_prepare</a><a href="#method.handle_prepare">handle_prepare</a><a href="#method.handle_seal_request">handle_seal_request</a><a href="#method.handle_seal_response">handle_seal_response</a><a href="#method.handle_view_change">handle_view_change</a><a href="#method.new">new</a><a href="#method.on_block_commit">on_block_commit</a><a href="#method.on_block_invalid">on_block_invalid</a><a href="#method.on_block_new">on_block_new</a><a href="#method.on_block_valid">on_block_valid</a><a href="#method.on_peer_connected">on_peer_connected</a><a href="#method.on_peer_message">on_peer_message</a><a href="#method.send_seal_response">send_seal_response</a><a href="#method.signed_votes_from_messages">signed_votes_from_messages</a><a href="#method.start_commit_timeout">start_commit_timeout</a><a href="#method.start_idle_timeout">start_idle_timeout</a><a href="#method.start_view_change">start_view_change</a><a href="#method.try_handling_block">try_handling_block</a><a href="#method.try_preparing">try_preparing</a><a href="#method.try_publish">try_publish</a><a href="#method.update_membership">update_membership</a><a href="#method.verify_consensus_seal">verify_consensus_seal</a><a href="#method.verify_consensus_seal_from_block">verify_consensus_seal_from_block</a><a href="#method.verify_new_view">verify_new_view</a><a href="#method.verify_vote">verify_vote</a></div><a class="sidebar-title" href="#synthetic-implementations">Auto Trait Implementations</a><div class="sidebar-links"><a href="#impl-RefUnwindSafe">!RefUnwindSafe</a><a href="#impl-Send">!Send</a><a href="#impl-Sync">!Sync</a><a href="#impl-Unpin">Unpin</a><a href="#impl-UnwindSafe">!UnwindSafe</a></div><a class="sidebar-title" href="#blanket-implementations">Blanket Implementations</a><div class="sidebar-links"><a href="#impl-Any">Any</a><a href="#impl-Borrow%3CT%3E">Borrow&lt;T&gt;</a><a href="#impl-BorrowMut%3CT%3E">BorrowMut&lt;T&gt;</a><a href="#impl-From%3CT%3E">From&lt;T&gt;</a><a href="#impl-Into%3CU%3E">Into&lt;U&gt;</a><a href="#impl-TryFrom%3CU%3E">TryFrom&lt;U&gt;</a><a href="#impl-TryInto%3CU%3E">TryInto&lt;U&gt;</a><a href="#impl-UnsafeAny">UnsafeAny</a></div></div><p class='location'><a href='../index.html'>pbft_engine</a>::<wbr><a href='index.html'>node</a></p><script>window.sidebarCurrent = {name: 'PbftNode', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../../settings.html"><img src="../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../../src/pbft_engine/node.rs.html#42-48' title='goto source code'>[src]</a></span><span class='in-band'>Struct <a href='../index.html'>pbft_engine</a>::<wbr><a href='index.html'>node</a>::<wbr><a class="struct" href=''>PbftNode</a></span></h1><div class="docblock type-decl hidden-by-usual-hider"><pre class='rust struct'>pub struct PbftNode {
    pub service: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn Service&gt;,
    pub msg_log: <a class="struct" href="../../pbft_engine/message_log/struct.PbftLog.html" title="struct pbft_engine::message_log::PbftLog">PbftLog</a>,
}</pre></div><div class='docblock'><p>Contains the core logic of the PBFT node</p>
</div><h2 id='fields' class='fields small-section-header'>
                       Fields<a href='#fields' class='anchor'></a></h2><span id="structfield.service" class="structfield small-section-header"><a href="#structfield.service" class="anchor field"></a><code id="service.v">service: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn Service&gt;</code></span><div class='docblock'><p>Used for interactions with the validator</p>
</div><span id="structfield.msg_log" class="structfield small-section-header"><a href="#structfield.msg_log" class="anchor field"></a><code id="msg_log.v">msg_log: <a class="struct" href="../../pbft_engine/message_log/struct.PbftLog.html" title="struct pbft_engine::message_log::PbftLog">PbftLog</a></code></span><div class='docblock'><p>Log of messages this node has received and accepted</p>
</div><h2 id='implementations' class='small-section-header'>Implementations<a href='#implementations' class='anchor'></a></h2><h3 id='impl' class='impl'><code class='in-band'>impl <a class="struct" href="../../pbft_engine/node/struct.PbftNode.html" title="struct pbft_engine::node::PbftNode">PbftNode</a></code><a href='#impl' class='anchor'></a><a class='srclink' href='../../src/pbft_engine/node.rs.html#50-1694' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.new' class="method"><code id='new.v'>pub fn <a href='#method.new' class='fnname'>new</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;config: &amp;<a class="struct" href="../../pbft_engine/config/struct.PbftConfig.html" title="struct pbft_engine::config::PbftConfig">PbftConfig</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;chain_head: Block, <br>&nbsp;&nbsp;&nbsp;&nbsp;connected_peers: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;PeerInfo&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;service: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn Service&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a><br>) -&gt; Self</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#54-94' title='goto source code'>[src]</a></h4><div class='docblock'><p>Construct a new PBFT node</p>
<p>If the node is the primary on start-up, it initializes a new block on the chain</p>
</div><h4 id='method.on_peer_message' class="method"><code id='on_peer_message.v'>pub fn <a href='#method.on_peer_message' class='fnname'>on_peer_message</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;msg: <a class="struct" href="../../pbft_engine/message_type/struct.ParsedMessage.html" title="struct pbft_engine::message_type::ParsedMessage">ParsedMessage</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#103-147' title='goto source code'>[src]</a></h4><div class='docblock'><p>Handle a peer message from another PbftNode</p>
<p>Handle all messages from other nodes. Such messages include <code>PrePrepare</code>, <code>Prepare</code>,
<code>Commit</code>, <code>ViewChange</code>, and <code>NewView</code>. Make sure the message is from a PBFT member. If the
node is view changing, ignore all messages that aren't <code>ViewChange</code>s or <code>NewView</code>s.</p>
</div><h4 id='method.handle_pre_prepare' class="method"><code id='handle_pre_prepare.v'>fn <a href='#method.handle_pre_prepare' class='fnname'>handle_pre_prepare</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;msg: <a class="struct" href="../../pbft_engine/message_type/struct.ParsedMessage.html" title="struct pbft_engine::message_type::ParsedMessage">ParsedMessage</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#160-219' title='goto source code'>[src]</a></h4><div class='docblock'><p>Handle a <code>PrePrepare</code> message</p>
<p>A <code>PrePrepare</code> message is accepted and added to the log if the following are true:</p>
<ul>
<li>The message signature is valid (already verified by validator)</li>
<li>The message is from the primary</li>
<li>The message's view matches the node's current view</li>
<li>A <code>PrePrepare</code> message does not already exist at this view and sequence number with a
different block</li>
</ul>
<p>Once a <code>PrePrepare</code> for the current sequence number is accepted and added to the log, the
node will try to switch to the <code>Preparing</code> phase.</p>
</div><h4 id='method.handle_prepare' class="method"><code id='handle_prepare.v'>fn <a href='#method.handle_prepare' class='fnname'>handle_prepare</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;msg: <a class="struct" href="../../pbft_engine/message_type/struct.ParsedMessage.html" title="struct pbft_engine::message_type::ParsedMessage">ParsedMessage</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#226-288' title='goto source code'>[src]</a></h4><div class='docblock'><p>Handle a <code>Prepare</code> message</p>
<p>Once a <code>Prepare</code> for the current sequence number is accepted and added to the log, the node
will check if it has the required 2f + 1 <code>Prepared</code> messages to move on to the Committing
phase</p>
</div><h4 id='method.handle_commit' class="method"><code id='handle_commit.v'>fn <a href='#method.handle_commit' class='fnname'>handle_commit</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;msg: <a class="struct" href="../../pbft_engine/message_type/struct.ParsedMessage.html" title="struct pbft_engine::message_type::ParsedMessage">ParsedMessage</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#294-348' title='goto source code'>[src]</a></h4><div class='docblock'><p>Handle a <code>Commit</code> message</p>
<p>Once a <code>Commit</code> for the current sequence number is accepted and added to the log, the node
will check if it has the required 2f + 1 <code>Commit</code> messages to actually commit the block</p>
</div><h4 id='method.handle_view_change' class="method"><code id='handle_view_change.v'>fn <a href='#method.handle_view_change' class='fnname'>handle_view_change</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;msg: &amp;<a class="struct" href="../../pbft_engine/message_type/struct.ParsedMessage.html" title="struct pbft_engine::message_type::ParsedMessage">ParsedMessage</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#356-446' title='goto source code'>[src]</a></h4><div class='docblock'><p>Handle a <code>ViewChange</code> message</p>
<p>When a <code>ViewChange</code> is received, check that it isn't outdated and add it to the log. If the
node isn't already view changing but it now has f + 1 ViewChange messages, start view
changing early. If the node is the primary and has 2f view change messages now, broadcast
the NewView message to the rest of the nodes to move to the new view.</p>
</div><h4 id='method.handle_new_view' class="method"><code id='handle_new_view.v'>fn <a href='#method.handle_new_view' class='fnname'>handle_new_view</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;msg: &amp;<a class="struct" href="../../pbft_engine/message_type/struct.ParsedMessage.html" title="struct pbft_engine::message_type::ParsedMessage">ParsedMessage</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#452-501' title='goto source code'>[src]</a></h4><div class='docblock'><p>Handle a <code>NewView</code> message</p>
<p>When a <code>NewView</code> is received, verify that it is valid; if it is, update the view and the
node's state.</p>
</div><h4 id='method.handle_seal_request' class="method"><code id='handle_seal_request.v'>fn <a href='#method.handle_seal_request' class='fnname'>handle_seal_request</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;msg: <a class="struct" href="../../pbft_engine/message_type/struct.ParsedMessage.html" title="struct pbft_engine::message_type::ParsedMessage">ParsedMessage</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#511-522' title='goto source code'>[src]</a></h4><div class='docblock'><p>Handle a <code>SealRequest</code> message</p>
<p>A node is requesting a consensus seal for the last block. If the block was the last one
committed by this node, build the seal and send it to the requesting node; if the block has
not been committed yet but it's the next one to be committed, add the request to the log
and the node will build/send the seal when it's done committing. If this is an older block
(state.seq_num &gt; msg.seq_num + 1) or this node is behind (state.seq_num &lt; msg.seq_num), the
node will not be able to build the requseted seal, so just ignore the message.</p>
</div><h4 id='method.handle_seal_response' class="method"><code id='handle_seal_response.v'>fn <a href='#method.handle_seal_response' class='fnname'>handle_seal_response</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;msg: &amp;<a class="struct" href="../../pbft_engine/message_type/struct.ParsedMessage.html" title="struct pbft_engine::message_type::ParsedMessage">ParsedMessage</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#528-581' title='goto source code'>[src]</a></h4><div class='docblock'><p>Handle a <code>Seal</code> message</p>
<p>A node has responded to the seal request by sending a seal for the last block; validate the
seal and commit the block.</p>
</div><h4 id='method.on_block_new' class="method"><code id='on_block_new.v'>pub fn <a href='#method.on_block_new' class='fnname'>on_block_new</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;block: Block, <br>&nbsp;&nbsp;&nbsp;&nbsp;state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#587-665' title='goto source code'>[src]</a></h4><div class='docblock'><p>Handle a <code>BlockNew</code> update from the Validator</p>
<p>The validator has received a new block; check if it is a block that should be considered,
add it to the log as an unvalidated block, and instruct the validator to validate it.</p>
</div><h4 id='method.on_block_valid' class="method"><code id='on_block_valid.v'>pub fn <a href='#method.on_block_valid' class='fnname'>on_block_valid</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;block_id: BlockId, <br>&nbsp;&nbsp;&nbsp;&nbsp;state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#671-690' title='goto source code'>[src]</a></h4><div class='docblock'><p>Handle a <code>BlockValid</code> update from the Validator</p>
<p>The block has been verified by the validator, so mark it as validated in the log and
attempt to handle the block.</p>
</div><h4 id='method.try_handling_block' class="method"><code id='try_handling_block.v'>fn <a href='#method.try_handling_block' class='fnname'>try_handling_block</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;block: Block, <br>&nbsp;&nbsp;&nbsp;&nbsp;state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#696-749' title='goto source code'>[src]</a></h4><div class='docblock'><p>Validate the block's seal and handle the block. If this is the block the node is waiting
for and this node is the primary, broadcast a PrePrepare; if the node isn't the primary but
it already has the PrePrepare for this block, switch to <code>Preparing</code>. If this is a future
block, use it to catch up.</p>
</div><h4 id='method.on_block_invalid' class="method"><code id='on_block_invalid.v'>pub fn <a href='#method.on_block_invalid' class='fnname'>on_block_invalid</a>(&amp;mut self, block_id: BlockId) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#754-771' title='goto source code'>[src]</a></h4><div class='docblock'><p>Handle a <code>BlockInvalid</code> update from the Validator</p>
<p>The block is invalid, so drop it from the log and fail it.</p>
</div><h4 id='method.catchup' class="method"><code id='catchup.v'>fn <a href='#method.catchup' class='fnname'>catchup</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;seal: &amp;<a class="struct" href="../../pbft_engine/protos/pbft_message/struct.PbftSeal.html" title="struct pbft_engine::protos::pbft_message::PbftSeal">PbftSeal</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;catchup_again: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#774-822' title='goto source code'>[src]</a></h4><div class='docblock'><p>Use the given consensus seal to verify and commit the block this node is working on</p>
</div><h4 id='method.on_block_commit' class="method"><code id='on_block_commit.v'>pub fn <a href='#method.on_block_commit' class='fnname'>on_block_commit</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;block_id: BlockId, <br>&nbsp;&nbsp;&nbsp;&nbsp;state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#829-961' title='goto source code'>[src]</a></h4><div class='docblock'><p>Handle a <code>BlockCommit</code> update from the Validator</p>
<p>A block was sucessfully committed; clean up any uncommitted blocks, update state to be
ready for the next block, make any necessary view and membership changes, garbage collect
the logs, and start a new block if this node is the primary.</p>
</div><h4 id='method.update_membership' class="method"><code id='update_membership.v'>fn <a href='#method.update_membership' class='fnname'>update_membership</a>(&amp;mut self, block_id: BlockId, state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a>)</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#968-992' title='goto source code'>[src]</a></h4><div class='docblock'><p>Check the on-chain list of members; if it has changed, update members list and return true.</p>
<h1 id="panics" class="section-header"><a href="#panics">Panics</a></h1>
<ul>
<li>If the <code>sawtooth.consensus.pbft.members</code> setting is unset or invalid</li>
<li>If the network this node is on does not have enough nodes to be Byzantine fault tolernant</li>
</ul>
</div><h4 id='method.try_preparing' class="method"><code id='try_preparing.v'>fn <a href='#method.try_preparing' class='fnname'>try_preparing</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;block_id: BlockId, <br>&nbsp;&nbsp;&nbsp;&nbsp;state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#997-1028' title='goto source code'>[src]</a></h4><div class='docblock'><p>When the node has a block and a corresponding PrePrepare for its current sequence number,
and it is in the PrePreparing phase, it can enter the Preparing phase and broadcast its
Prepare</p>
</div><h4 id='method.on_peer_connected' class="method"><code id='on_peer_connected.v'>pub fn <a href='#method.on_peer_connected' class='fnname'>on_peer_connected</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;peer_id: PeerId, <br>&nbsp;&nbsp;&nbsp;&nbsp;state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#1034-1045' title='goto source code'>[src]</a></h4><div class='docblock'><p>Handle a <code>PeerConnected</code> update from the Validator</p>
<p>A peer has just connected to this node. Send a bootstrap commit message if the peer is part
of the network and the node isn't at the genesis block.</p>
</div><h4 id='method.broadcast_bootstrap_commit' class="method"><code id='broadcast_bootstrap_commit.v'>fn <a href='#method.broadcast_bootstrap_commit' class='fnname'>broadcast_bootstrap_commit</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;peer_id: PeerId, <br>&nbsp;&nbsp;&nbsp;&nbsp;state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#1053-1110' title='goto source code'>[src]</a></h4><div class='docblock'><p>When the whole network is starting &quot;fresh&quot; from a non-genesis block, none of the nodes will
have the <code>Commit</code> messages necessary to build the consensus seal for the last committed
block (the chain head). To bootstrap the network in this scenario, all nodes will send a
<code>Commit</code> message for their chain head whenever one of the PBFT members connects; when</p>
<blockquote>
<p>2f + 1 nodes have connected and received these <code>Commit</code> messages, the nodes will be able
to build a seal using the messages.</p>
</blockquote>
</div><h4 id='method.signed_votes_from_messages' class="method"><code id='signed_votes_from_messages.v'>fn <a href='#method.signed_votes_from_messages' class='fnname'>signed_votes_from_messages</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;msgs: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a>&amp;<a class="struct" href="../../pbft_engine/message_type/struct.ParsedMessage.html" title="struct pbft_engine::message_type::ParsedMessage">ParsedMessage</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a><br>) -&gt; RepeatedField&lt;<a class="struct" href="../../pbft_engine/protos/pbft_message/struct.PbftSignedVote.html" title="struct pbft_engine::protos::pbft_message::PbftSignedVote">PbftSignedVote</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#1115-1129' title='goto source code'>[src]</a></h4><div class='docblock'><p>Generate a <code>protobuf::RepeatedField</code> of signed votes from a list of parsed messages</p>
</div><h4 id='method.build_seal' class="method"><code id='build_seal.v'>fn <a href='#method.build_seal' class='fnname'>build_seal</a>(&amp;self, state: &amp;<a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../../pbft_engine/protos/pbft_message/struct.PbftSeal.html" title="struct pbft_engine::protos::pbft_message::PbftSeal">PbftSeal</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#1132-1178' title='goto source code'>[src]</a></h4><div class='docblock'><p>Build a consensus seal that proves the last block committed by this node</p>
</div><h4 id='method.verify_vote' class="method"><code id='verify_vote.v'>fn <a href='#method.verify_vote' class='fnname'>verify_vote</a>&lt;F&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;vote: &amp;<a class="struct" href="../../pbft_engine/protos/pbft_message/struct.PbftSignedVote.html" title="struct pbft_engine::protos::pbft_message::PbftSignedVote">PbftSignedVote</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;expected_type: <a class="enum" href="../../pbft_engine/message_type/enum.PbftMessageType.html" title="enum pbft_engine::message_type::PbftMessageType">PbftMessageType</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;validation_criteria: F<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;PeerId, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(&amp;<a class="struct" href="../../pbft_engine/protos/pbft_message/struct.PbftMessage.html" title="struct pbft_engine::protos::pbft_message::PbftMessage">PbftMessage</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;,&nbsp;</span></code><a class='srclink' href='../../src/pbft_engine/node.rs.html#1183-1263' title='goto source code'>[src]</a></h4><div class='docblock'><p>Verify that a vote matches the expected type, is properly signed, and passes the specified
criteria; if it passes verification, return the signer ID to be used for further
verification</p>
</div><h4 id='method.verify_new_view' class="method"><code id='verify_new_view.v'>fn <a href='#method.verify_new_view' class='fnname'>verify_new_view</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;new_view: &amp;<a class="struct" href="../../pbft_engine/protos/pbft_message/struct.PbftNewView.html" title="struct pbft_engine::protos::pbft_message::PbftNewView">PbftNewView</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#1266-1345' title='goto source code'>[src]</a></h4><div class='docblock'><p>Verify that a NewView messsage is valid</p>
</div><h4 id='method.verify_consensus_seal_from_block' class="method"><code id='verify_consensus_seal_from_block.v'>fn <a href='#method.verify_consensus_seal_from_block' class='fnname'>verify_consensus_seal_from_block</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;block: &amp;Block, <br>&nbsp;&nbsp;&nbsp;&nbsp;state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../../pbft_engine/protos/pbft_message/struct.PbftSeal.html" title="struct pbft_engine::protos::pbft_message::PbftSeal">PbftSeal</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#1349-1399' title='goto source code'>[src]</a></h4><div class='docblock'><p>Verify the consensus seal from the current block that proves the previous block and return
the parsed seal</p>
</div><h4 id='method.verify_consensus_seal' class="method"><code id='verify_consensus_seal.v'>fn <a href='#method.verify_consensus_seal' class='fnname'>verify_consensus_seal</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;seal: &amp;<a class="struct" href="../../pbft_engine/protos/pbft_message/struct.PbftSeal.html" title="struct pbft_engine::protos::pbft_message::PbftSeal">PbftSeal</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;previous_id: BlockId, <br>&nbsp;&nbsp;&nbsp;&nbsp;state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#1405-1502' title='goto source code'>[src]</a></h4><div class='docblock'><p>Verify the given consenus seal</p>
<h1 id="panics-1" class="section-header"><a href="#panics-1">Panics</a></h1>
<ul>
<li>If the <code>sawtooth.consensus.pbft.members</code> setting is unset or invalid</li>
</ul>
</div><h4 id='method.try_publish' class="method"><code id='try_publish.v'>pub fn <a href='#method.try_publish' class='fnname'>try_publish</a>(&amp;mut self, state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#1507-1545' title='goto source code'>[src]</a></h4><div class='docblock'><p>At a regular interval, try to finalize a block when the primary is ready</p>
</div><h4 id='method.check_idle_timeout_expired' class="method"><code id='check_idle_timeout_expired.v'>pub fn <a href='#method.check_idle_timeout_expired' class='fnname'>check_idle_timeout_expired</a>(&amp;mut self, state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code><a class='srclink' href='../../src/pbft_engine/node.rs.html#1548-1550' title='goto source code'>[src]</a></h4><div class='docblock'><p>Check to see if the idle timeout has expired</p>
</div><h4 id='method.start_idle_timeout' class="method"><code id='start_idle_timeout.v'>pub fn <a href='#method.start_idle_timeout' class='fnname'>start_idle_timeout</a>(&amp;self, state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a>)</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#1553-1555' title='goto source code'>[src]</a></h4><div class='docblock'><p>Start the idle timeout</p>
</div><h4 id='method.check_commit_timeout_expired' class="method"><code id='check_commit_timeout_expired.v'>pub fn <a href='#method.check_commit_timeout_expired' class='fnname'>check_commit_timeout_expired</a>(&amp;mut self, state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code><a class='srclink' href='../../src/pbft_engine/node.rs.html#1558-1560' title='goto source code'>[src]</a></h4><div class='docblock'><p>Check to see if the commit timeout has expired</p>
</div><h4 id='method.start_commit_timeout' class="method"><code id='start_commit_timeout.v'>pub fn <a href='#method.start_commit_timeout' class='fnname'>start_commit_timeout</a>(&amp;self, state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a>)</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#1563-1565' title='goto source code'>[src]</a></h4><div class='docblock'><p>Start the commit timeout</p>
</div><h4 id='method.check_view_change_timeout_expired' class="method"><code id='check_view_change_timeout_expired.v'>pub fn <a href='#method.check_view_change_timeout_expired' class='fnname'>check_view_change_timeout_expired</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a><br>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code><a class='srclink' href='../../src/pbft_engine/node.rs.html#1568-1570' title='goto source code'>[src]</a></h4><div class='docblock'><p>Check to see if the view change timeout has expired</p>
</div><h4 id='method.broadcast_pbft_message' class="method"><code id='broadcast_pbft_message.v'>fn <a href='#method.broadcast_pbft_message' class='fnname'>broadcast_pbft_message</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;view: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;seq_num: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;msg_type: <a class="enum" href="../../pbft_engine/message_type/enum.PbftMessageType.html" title="enum pbft_engine::message_type::PbftMessageType">PbftMessageType</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;block_id: BlockId, <br>&nbsp;&nbsp;&nbsp;&nbsp;state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#1575-1595' title='goto source code'>[src]</a></h4><div class='docblock'><p>Construct a PbftMessage message and broadcast it to all peers (including self)</p>
</div><h4 id='method.broadcast_message' class="method"><code id='broadcast_message.v'>fn <a href='#method.broadcast_message' class='fnname'>broadcast_message</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;msg: <a class="struct" href="../../pbft_engine/message_type/struct.ParsedMessage.html" title="struct pbft_engine::message_type::ParsedMessage">ParsedMessage</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#1598-1618' title='goto source code'>[src]</a></h4><div class='docblock'><p>Broadcast the specified message to all of the node's peers, including itself</p>
</div><h4 id='method.send_seal_response' class="method"><code id='send_seal_response.v'>fn <a href='#method.send_seal_response' class='fnname'>send_seal_response</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;state: &amp;<a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;recipient: &amp;PeerId<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#1623-1652' title='goto source code'>[src]</a></h4><div class='docblock'><p>Build a consensus seal for the last block this node committed and send it to the node that
requested the seal (the <code>recipient</code>)</p>
</div><h4 id='method.start_view_change' class="method"><code id='start_view_change.v'>pub fn <a href='#method.start_view_change' class='fnname'>start_view_change</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;state: &amp;mut <a class="struct" href="../../pbft_engine/state/struct.PbftState.html" title="struct pbft_engine::state::PbftState">PbftState</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;view: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="../../pbft_engine/error/enum.PbftError.html" title="enum pbft_engine::error::PbftError">PbftError</a>&gt;</code><a class='srclink' href='../../src/pbft_engine/node.rs.html#1663-1693' title='goto source code'>[src]</a></h4><div class='docblock'><p>Start a view change when this node suspects that the primary is faulty</p>
<p>Update state to reflect that the node is now in the process of this view change, start the
view change timeout, and broadcast a view change message</p>
<h1 id="panics-2" class="section-header"><a href="#panics-2">Panics</a></h1>
<ul>
<li>If the view change timeout overflows</li>
</ul>
</div></div><h2 id='synthetic-implementations' class='small-section-header'>Auto Trait Implementations<a href='#synthetic-implementations' class='anchor'></a></h2><div id='synthetic-implementations-list'><h3 id='impl-RefUnwindSafe' class='impl'><code class='in-band'>impl !<a class="trait" href="https://doc.rust-lang.org/nightly/std/panic/trait.RefUnwindSafe.html" title="trait std::panic::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="../../pbft_engine/node/struct.PbftNode.html" title="struct pbft_engine::node::PbftNode">PbftNode</a></code><a href='#impl-RefUnwindSafe' class='anchor'></a></h3><div class='impl-items'></div><h3 id='impl-Send' class='impl'><code class='in-band'>impl !<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="../../pbft_engine/node/struct.PbftNode.html" title="struct pbft_engine::node::PbftNode">PbftNode</a></code><a href='#impl-Send' class='anchor'></a></h3><div class='impl-items'></div><h3 id='impl-Sync' class='impl'><code class='in-band'>impl !<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="../../pbft_engine/node/struct.PbftNode.html" title="struct pbft_engine::node::PbftNode">PbftNode</a></code><a href='#impl-Sync' class='anchor'></a></h3><div class='impl-items'></div><h3 id='impl-Unpin' class='impl'><code class='in-band'>impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="../../pbft_engine/node/struct.PbftNode.html" title="struct pbft_engine::node::PbftNode">PbftNode</a></code><a href='#impl-Unpin' class='anchor'></a></h3><div class='impl-items'></div><h3 id='impl-UnwindSafe' class='impl'><code class='in-band'>impl !<a class="trait" href="https://doc.rust-lang.org/nightly/std/panic/trait.UnwindSafe.html" title="trait std::panic::UnwindSafe">UnwindSafe</a> for <a class="struct" href="../../pbft_engine/node/struct.PbftNode.html" title="struct pbft_engine::node::PbftNode">PbftNode</a></code><a href='#impl-UnwindSafe' class='anchor'></a></h3><div class='impl-items'></div></div><h2 id='blanket-implementations' class='small-section-header'>Blanket Implementations<a href='#blanket-implementations' class='anchor'></a></h2><div id='blanket-implementations-list'><h3 id='impl-Any' class='impl'><code class='in-band'>impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></code><a href='#impl-Any' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/any.rs.html#108-112' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.type_id' class="method hidden"><code id='type_id.v'>fn <a href='https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id' class='fnname'>type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/any.rs.html#109-111' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id">Read more</a></p>
</div></div><h3 id='impl-Borrow%3CT%3E' class='impl'><code class='in-band'>impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></code><a href='#impl-Borrow%3CT%3E' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#213-217' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.borrow' class="method hidden"><code id='borrow.v'>fn <a href='https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow' class='fnname'>borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>T</code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#214-216' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></p>
</div></div><h3 id='impl-BorrowMut%3CT%3E' class='impl'><code class='in-band'>impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></code><a href='#impl-BorrowMut%3CT%3E' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#220-224' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.borrow_mut' class="method hidden"><code id='borrow_mut.v'>fn <a href='https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut' class='fnname'>borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>T</code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#221-223' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></p>
</div></div><h3 id='impl-From%3CT%3E' class='impl'><code class='in-band'>impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</code><a href='#impl-From%3CT%3E' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#565-569' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.from' class="method hidden"><code id='from.v'>fn <a href='https://doc.rust-lang.org/nightly/core/convert/trait.From.html#tymethod.from' class='fnname'>from</a>(t: T) -&gt; T</code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#566-568' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div><h3 id='impl-Into%3CU%3E' class='impl'><code class='in-band'>impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,&nbsp;</span></code><a href='#impl-Into%3CU%3E' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#554-561' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.into' class="method hidden"><code id='into.v'>fn <a href='https://doc.rust-lang.org/nightly/core/convert/trait.Into.html#tymethod.into' class='fnname'>into</a>(self) -&gt; U</code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#558-560' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div><h3 id='impl-TryFrom%3CU%3E' class='impl'><code class='in-band'>impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,&nbsp;</span></code><a href='#impl-TryFrom%3CU%3E' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#602-611' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='associatedtype.Error' class="type"><code id='Error.t'>type <a href='https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error' class="type">Error</a> = <a class="enum" href="https://doc.rust-lang.org/nightly/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></code></h4><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div><h4 id='method.try_from' class="method hidden"><code id='try_from.v'>fn <a href='https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#tymethod.try_from' class='fnname'>try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#608-610' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div><h3 id='impl-TryInto%3CU%3E' class='impl'><code class='in-band'>impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,&nbsp;</span></code><a href='#impl-TryInto%3CU%3E' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#588-597' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='associatedtype.Error-1' class="type"><code id='Error.t-1'>type <a href='https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#associatedtype.Error' class="type">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></code></h4><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div><h4 id='method.try_into' class="method hidden"><code id='try_into.v'>fn <a href='https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#tymethod.try_into' class='fnname'>try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#594-596' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div><h3 id='impl-UnsafeAny' class='impl'><code class='in-band'>impl&lt;T&gt; UnsafeAny for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html" title="trait core::any::Any">Any</a>,&nbsp;</span></code><a href='#impl-UnsafeAny' class='anchor'></a></h3><div class='impl-items'></div></div></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../../";window.currentCrate = "pbft_engine";</script><script src="../../main.js"></script><script defer src="../../search-index.js"></script></body></html>