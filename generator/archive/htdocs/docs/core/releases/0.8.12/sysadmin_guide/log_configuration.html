

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Log Configuration &mdash; Sawtooth v0.8.12 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Sawtooth v0.8.12 documentation" href="../index.html"/>
        <link rel="up" title="System Administrator’s Guide" href="../sysadmin_guide.html"/>
        <link rel="next" title="Using a Proxy Server to Authorize the REST API" href="rest_auth_proxy.html"/>
        <link rel="prev" title="Running Sawtooth As A Service" href="systemd.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../contents.html" class="icon icon-home"> Sawtooth
          

          
          </a>

          
            
            
              <div class="version">
                v0.8.12
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app_developers_guide.html">Application Developer&#8217;s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../solidity_developers_guide.html">Solidity Developers Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core_developers_guide.html">Core Developer&#8217;s Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../sysadmin_guide.html">System Administrator&#8217;s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="installation.html">Installing Hyperledger Sawtooth</a></li>
<li class="toctree-l2"><a class="reference internal" href="systemd.html">Running Sawtooth As A Service</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Log Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#default">Default</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#config-directory">Config Directory</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configure-specific-logger">Configure Specific Logger</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rotating-file-handler">Rotating File Handler</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="rest_auth_proxy.html">Using a Proxy Server to Authorize the REST API</a></li>
<li class="toctree-l2"><a class="reference internal" href="permissioning.html">Permissioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="configure_sgx.html">Using Sawtooth with the SGX Implementation of PoET</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../rest_api.html">REST API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">CLI Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../transaction_family_specifications.html">Transaction Family Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../contents.html">Sawtooth</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../contents.html">Docs</a> &raquo;</li>
        
          <li><a href="../sysadmin_guide.html">System Administrator&#8217;s Guide</a> &raquo;</li>
        
      <li>Log Configuration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/sysadmin_guide/log_configuration.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="log-configuration">
<h1>Log Configuration<a class="headerlink" href="#log-configuration" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The validator and the Python SDK make it easy to customize the logging output.
This is done by creating a TOML (<a class="reference external" href="https://github.com/toml-lang/toml">https://github.com/toml-lang/toml</a>)
formatted log config file and passing it to the built-in Python logging module.</p>
</div>
<div class="section" id="default">
<h2>Default<a class="headerlink" href="#default" title="Permalink to this headline">¶</a></h2>
<p>If there is no log configuration file provided, the default is to create an
error log and a debug log. Theses files will be stored in the log directory that
is configured by the SAWTOOTH_HOME environment variable. For example, if
<cite>SAWTOOTH_HOME=&#8221;/home/ubuntu/sawtooth&#8221;</cite>, the logs will be written
to <cite>/home/ubuntu/sawtooth/logs</cite>.</p>
<p>If SAWTOOTH_HOME is not set, the default location is OS-specific. On Linux,
it&#8217;s <cite>/var/log/sawtooth</cite>. On Windows, it is one level up from the where the
command is installed. For example, if <cite>C:\sawtooth\bin\validator.exe</cite>
starts the validator, the log directory is <cite>C:\sawtooth\logs\</cite>. The log
directory can also be set in the path.toml file, however, this file should
rarely be used.</p>
<p>The name of the validator logs will look like the following:</p>
<ul class="simple">
<li>validator-{first 8 characters of the validator&#8217;s pubkey}-debug.log</li>
<li>validator-{first 8 characters of the validator&#8217;s pubkey}-error.log</li>
</ul>
<p>Examples:</p>
<ul class="simple">
<li><em>validator-03aa0272-debug.log</em></li>
<li><em>validator-03aa0272-error.log</em></li>
</ul>
<p>For Python transaction processors, the author determines the name of the log
file. It is highly encouraged that the file names are unique for each running
processor to avoid naming conflicts.  The example transaction processors
provided with the SDK uses the following:</p>
<ul class="simple">
<li>{tp_name}-{zmq_identity}-debug.log</li>
<li>{tp_name}-{zmq_identity}-error.log</li>
</ul>
<p>Examples:</p>
<ul class="simple">
<li><em>intkey-18670799cbbe4367-debug.log</em></li>
<li><em>intkey-18670799cbbe4367-error.log</em></li>
</ul>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>To change the default behavior, a log configuration file can be placed in the
config directory (see below).</p>
<p>The validator log config file should be named <cite>log_config.toml</cite>.</p>
<p>Each transaction processor may also define its own config file. The name of
this file is determined by the author. The transaction processors included in
the Python SDK follow the convention <cite>{Transaction_Family_Name}_log_config.toml</cite>.
For example, intkey&#8217;s log config file is named <cite>intkey_log_config.toml</cite>.</p>
<div class="section" id="config-directory">
<h3>Config Directory<a class="headerlink" href="#config-directory" title="Permalink to this headline">¶</a></h3>
<p>If <cite>$SAWTOOTH_HOME</cite> is set the config directory is found at
<cite>$SAWTOOTH_HOME/etc/</cite> . Otherwise it is defined by the OS being used. On Linux the
config directory is located at <cite>/etc/sawtooth</cite>. On Windows, the config
directory is located one directory up from where the command is installed.
For example, if <cite>C:\sawtooth\bin\validator.exe</cite> starts the validator, the config
directory is <cite>C:\sawtooth\conf\</cite>. As long as the log configuration file is
present, the validator and transaction processors will automatically find it
and load the configuration.</p>
</div>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="configure-specific-logger">
<h3>Configure Specific Logger<a class="headerlink" href="#configure-specific-logger" title="Permalink to this headline">¶</a></h3>
<p>If the default logs give too much information, you can configure a specific
logger that will only report on the area of the code you are interested in.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>version = 1
disable_existing_loggers = false

[formatters.simple]
format = &quot;[%(asctime)s.%(msecs)03d [%(threadName)s] %(module)s %(levelname)s] %(message)s&quot;
datefmt = &quot;%H:%M:%S&quot;

[handlers.interconnect]
level = &quot;DEBUG&quot;
formatter = &quot;simple&quot;
class = &quot;logging.FileHandler&quot;
filename = &quot;path/filename.log&quot;

[loggers.&quot;sawtooth_validator.networking.interconnect&quot;]
level = &quot;DEBUG&quot;
propagate = true
handlers = [ &quot;interconnect&quot;]
</pre></div>
</div>
<p>The above log_config.toml file creates a handler that only writes
interconnect logs to the directory and file specified. The formatter and log level
can also be specified to provide the exact information you want in your logs.</p>
</div>
<div class="section" id="rotating-file-handler">
<h3>Rotating File Handler<a class="headerlink" href="#rotating-file-handler" title="Permalink to this headline">¶</a></h3>
<p>Below is an example of how to setup rotating logs. This is useful when the logs
may grow very large, such as with a long running network.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span> [formatters.simple]
 format = &quot;[%(asctime)s.%(msecs)03d [%(threadName)s] %(module)s %(levelname)s] %(message)s&quot;
 datefmt = &quot;%H:%M:%S&quot;

 [handlers.interconnect]
 level = &quot;DEBUG&quot;
 formatter = &quot;simple&quot;
 class = &quot;logging.handlers.RotatingFileHandler&quot;
 filename = &quot;example-interconnect.log&quot;
 maxBytes = 50000000
 backupCount=20

[loggers.&quot;sawtooth_validator.networking.interconnect&quot;]
 level = &quot;DEBUG&quot;
 propagate = true
 handlers = [ &quot;interconnect&quot;]
</pre></div>
</div>
<p>If one file exceeds the maxBytes set in the config file, that file will be
renamed to filename.log.1 and a new filename.log will be written to. This
process continues for the number of files plus one set in the backupCount.
After that point, the file that is being written to is rotated. The current
file being written to is always filename.log.</p>
<p>For further configuration options see the Python docs:
<a class="reference external" href="https://docs.python.org/3/library/logging.config.html">https://docs.python.org/3/library/logging.config.html</a></p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="rest_auth_proxy.html" class="btn btn-neutral float-right" title="Using a Proxy Server to Authorize the REST API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="systemd.html" class="btn btn-neutral" title="Running Sawtooth As A Service" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015-2017, Intel Corporation.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'v0.8.12',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>